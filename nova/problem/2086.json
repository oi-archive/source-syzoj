{"title":"「APIO2019」路灯","time_limit":5000,"memory_limit":512,"tags":["APIO","2019"],"operation":{"submit":"https://noj.ac/problem/2086#submit_code","submissions":"https://noj.ac/submissions?problem_id=2086","statistics":"https://noj.ac/problem/2086/statistics/fastest","testdata":"https://noj.ac/problem/2086/testdata","discussion":"https://noj.ac/discussion/problem/2086"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"一辆自动驾驶的出租车正在 Innopolis 的街道上行驶。该街道上有 $n + 1$ 个停车站点，它们将街道划分成了 $n$ 条路段。每一路段都拥有一个路灯。当第 $i$ 个路灯亮起，它将照亮连接第 $i$ 与第 $i + 1$ 个站点的路段。否则这条路段将是黑暗的。\r\n\r\n安全起见，出租车只能在被照亮的路段上行驶。换言之，出租车能从站点 $a$ 出发到达站点 $b\\  (a < b)$ 的条件是：连接站点 $a$ 与 $a + 1$，$a + 1$ 与 $a + 2$，……，$b − 1$ 与 $b$ 的路段都被照亮。\r\n\r\n在经过一些意外故障或修理之后，街道上的路灯可能是亮起的，也可能是熄灭的。\r\n\r\n现在给定 $0$ 时刻时，街道上路灯的初始状态。之后 $1, 2,\\ldots , q$ 时刻，每时刻会发生下列两种事件之一：\r\n- $\\texttt{toggle}\\ i$：切换第 $i$ 个路灯的状态。具体地说，若路灯原来亮起，则现在将熄灭；若路灯原来熄灭，则现在将亮起。\r\n- $\\texttt{query}\\ a\\ b$：出租车部门的负责人想知道，从 $0$ 时刻起到当前时刻，有多少个时刻满足：出租车能够从站点 $a$ 出发到达站点 $b$。\r\n\r\n请你帮助出租车部门的负责人回答他们的问题。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含两个整数 $n$ 和 $q$——表示路灯的数量与时刻数。\r\n\r\n第二行包含一个字符串 $s$ 表示路灯的初始状态，$s_i$ 为 `1` 表示第 $i$ 个路灯初始时亮起；$s_i$ 为 `0` 表示第 $i$ 个路灯初始时熄灭。\r\n\r\n接下来 $q$ 行每行描述一个时刻的事件。第 $i$ 行描述时刻 $i$ 所发生的事件：\r\n- $\\texttt{toggle}\\ i$：该时刻切换了第 $i$ 个路灯的状态。\r\n- $\\texttt{query}\\ a\\ b$：计算从 $0$ 时刻起到该时刻，共有多少个时刻满足：出租车能从站点 $a$ 出发到达站点 $b$。\r\n\r\n至少有一个时刻的事件是 $\\texttt{query}$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个 $\\texttt{query}$ 的事件，输出一行单个整数，表示该问题的答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 7\r\n11011\r\nquery 1 2\r\nquery 1 2\r\nquery 1 6\r\nquery 3 4\r\ntoggle 3\r\nquery 3 4\r\nquery 1 6\r\n```\r\n#### 样例输出\r\n```plain\r\n1\r\n2\r\n0\r\n0\r\n1\r\n2\r\n```\r\n#### 样例说明\r\n在这组样例中\r\n\r\n| 时刻 | 路灯状态 |          询问          | 答案对应的时刻 |\r\n| :--: | :------: | :--------------------: | :------------: |\r\n| $1$  | $11011$  |            <!-- 3 -->             |         <!-- 4 -->        |\r\n|   <!-- 1 -->   |      <!-- 2 -->     | $\\texttt{query}\\ 1\\ 2$ |      $1$       |\r\n| $2$  | $11011$  |           <!-- 1 -->              |       <!-- 2 -->          |\r\n|  <!-- 1 -->     |    <!-- 2 -->       | $\\texttt{query}\\ 1\\ 2$ |     $1,2$      |\r\n| $3$  | $11011$  |             <!-- 1 -->            |    <!-- 2 -->             |\r\n|    <!-- 1 -->   |      <!-- 2 -->     | $\\texttt{query}\\ 1\\ 6$ |       无       |\r\n| $4$  | $11011$  |            <!-- 1 -->             |       <!-- 2 -->          |\r\n|            <!-- 1 -->             |       <!-- 2 -->          | $\\texttt{query}\\ 3\\ 4$ |       无       |\r\n| $5$  | $11011$  |            <!-- 1 -->             |       <!-- 2 -->          |\r\n|            <!-- 1 -->             |       <!-- 2 -->          |  $\\texttt{toggle}\\ 3$  |       -        |\r\n| $6$  | $11111$  |            <!-- 1 -->             |       <!-- 2 -->          |\r\n|            <!-- 1 -->             |       <!-- 2 -->          | $\\texttt{query}\\ 3\\ 4$ |      $6$       |\r\n| $7$  | $11111$  |            <!-- 1 -->             |       <!-- 2 -->          |\r\n|            <!-- 1 -->             |       <!-- 2 -->          | $\\texttt{query}\\ 1\\ 6$ |     $6,7$      |\r\n\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1\\le n,q\\le 3\\times 10^5,|s|=n,1\\le i\\le n,1\\le a<b\\le n+1$。\r\n\r\n详细子任务限制与分值如下表。\r\n\r\n| 子任务 |                           附加限制                           | 分值 |\r\n| :----: | :----------------------------------------------------------: | :--: |\r\n|  $1$   |                         $n,q\\le 100$                         | $20$ |\r\n|  $2$   |    对于所有 $\\texttt{query}\\ a\\ b$ 事件，满足 $b - a = 1$    | $20$ |\r\n|  $3$   |  对于所有 $\\texttt{toggle}\\ i$ 事件，第 $i$ 个路灯将被点亮   | $20$ |\r\n|  $4$   | 所有 $\\texttt{toggle}$ 事件都发生在第一个 $\\texttt{query}$ 事件之前。 | $20$ |\r\n|  $5$   |                             无特殊限制                             |   $20$   |\r\n\r\n"}]}