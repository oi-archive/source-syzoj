{"title":"「APIO2019」奇怪装置","time_limit":4000,"memory_limit":512,"tags":["APIO","2019"],"operation":{"submit":"https://noj.ac/problem/2084#submit_code","submissions":"https://noj.ac/submissions?problem_id=2084","statistics":"https://noj.ac/problem/2084/statistics/fastest","testdata":"https://noj.ac/problem/2084/testdata","discussion":"https://noj.ac/discussion/problem/2084"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"考古学家发现古代文明留下了一种奇怪的装置。该装置包含两个屏幕，分别显示两个整数 $x$ 和 $y$。\r\n\r\n经过研究，科学家对该装置得出了一个结论：该装置是一个特殊的时钟，它从过去的某个时间点开始测量经过的时刻数 $t$，但该装置的创造者却将 $t$ 用奇怪的方式显示出来。若从该装置开始测量到现在所经过的时刻数为 $t$，装置会显示两个整数：$x = ((t + \\lfloor \\frac{t}{B} \\rfloor) \\bmod A)$，与 $y = (t \\bmod B)$。这里 $\\lfloor x\\rfloor$ 是下取整函数，表示小于或等于 $x$ 的最大整数。\r\n\r\n考古学家通过进一步研究还发现，该装置的屏幕无法一直工作。实际上，该装置的屏幕只在 $n$ 个连续的时间区间段中能正常工作。第 $i$ 个时间段从时刻 $l_i$ 到时刻 $r_i$。现在科学家想要知道有多少个不同的数对 $(x, y)$ 能够在该装置工作时被显示出来。\r\n\r\n两个数对 $(x_1, y_1)$ 和 $(x_2, y_2)$ 不同当且仅当 $x_1 \\not = x_2$ 或 $y_1 \\not = y_2$。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含三个整数 $n, A$ 与 $B$。  \r\n接下来 $n$ 行每行两个整数 $l_i, r_i$，表示装置可以工作的第 $i$ 个时间区间。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个整数表示问题的答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n3 3 3\r\n4 4\r\n7 9\r\n17 18\r\n```\r\n#### 样例输出 1\r\n```plain\r\n4\r\n```\r\n#### 样例说明 1\r\n对于第一个样例，装置屏幕将显示如下这些数对。\r\n\r\n|$t$|$(x,y)$|\r\n|:-:|:-:|\r\n|$4$|$(2,1)$|\r\n|$7$|$(0,1)$|\r\n|$8$|$(1,2)$|\r\n|$9$|$(0,0)$|\r\n|$17$|$(1,2)$|\r\n|$18$|$(0,0)$|\r\n\r\n共有四个不同的数对：$(0, 0), (0, 1), (1, 2), (2, 1)$。\r\n\r\n#### 样例输入 2\r\n```plain\r\n3 5 10\r\n1 20\r\n50 68\r\n89 98\r\n```\r\n#### 样例输出 2\r\n```plain\r\n31\r\n```\r\n#### 样例输入 3\r\n```plain\r\n2 16 13\r\n2 5\r\n18 18\r\n```\r\n#### 样例输出 3\r\n```plain\r\n5\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1\\le n\\le 10^6,1\\le A,B\\le 10^{18},0\\le l_i\\le r_i\\le 10^{18},r_i<l_i+1$。\r\n\r\n令 $S=\\sum\\limits_{i=1}^n (r_i-l_i+1)$ 与 $L=\\max\\limits_{i=1}^n (r_i-l_i+1)$。\r\n\r\n详细子任务附加限制与分值如下表。\r\n\r\n| 子任务 |      附加限制      | 分值 |\r\n| :----: | :----------------: | :--: |\r\n|  $1$   |    $S\\le 10^6$     | $10$ |\r\n|  $2$   |       $n=1$        | $5$  |\r\n|  $3$   | $A\\cdot B\\le 10^6$ | $5$  |\r\n|  $4$   |       $B=1$        | $5$  |\r\n|  $5$   |      $B\\le 3$      | $5$  |\r\n|  $6$   |    $B\\le 10^6$     | $20$ |\r\n|  $7$   |      $L\\le B$      | $20$ |\r\n|  $8$   |     无附加限制     | $30$ |\r\n\r\n"}]}