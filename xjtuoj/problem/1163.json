{"title":"Rhodoks的俄罗斯阶梯方块","time_limit":1000,"memory_limit":512,"tags":["2020校赛","2020小学期","线段树"],"operation":{"submit":"https://oj.xjtuicpc.com/problem/1163#submit_code","submissions":"https://oj.xjtuicpc.com/submissions?problem_id=1163","statistics":"https://oj.xjtuicpc.com/problem/1163/statistics/fastest","testdata":"https://oj.xjtuicpc.com/problem/1163/testdata","discussion":"https://oj.xjtuicpc.com/discussion/problem/1163"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"在这个特别的俄罗斯方块游戏中，规则稍有不同。游戏进行在一个宽度为$n$格，没有高度限制的二维场地上。列从左至右按1-n编号，行自下而上从0开始编号（见样例图）。从无限高处依次竖直下落$m$个大小不一的阶梯型方块，当方块的底端第一次触到其他方块或者底面时，它将停止下落。如果某一行被填满，**不会**发生消去操作。在游戏结束之后，你的得分为填满的层数。\r\n\r\n我们定义阶梯型方块为：从左至右方块的厚度依次递增$1$或依次递减$1$，最薄处为1格厚且底部对齐的方块。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行为两个正整数$n$和$m$。\r\n\r\n接下来$m$行每行三个整数$l,r,k$。代表一个最左端在横坐标$l$处，最右端在$r$处，且从左至右厚度递增$k$的阶梯型方块落下。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出共$m+1$行。前$m$行每行一个整数，为第$i$个方块落下后底端边缘的高度。\r\n\r\n第$m+1$行首先输出一个整数$r$，含义是玩家在此局的得分（填满的行数），接下来输出$r$个整数，按高度从小到大输出填满的行序号。这$r+1$个数用空格分隔。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n6 5\r\n1 6 1\r\n1 2 1\r\n1 4 -1\r\n4 5 -1\r\n3 3 1\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n0\r\n2\r\n4\r\n5\r\n6\r\n4 0 2 4 5 \r\n```\r\n\r\n![](https://s2.ax1x.com/2020/01/21/1kagxK.png)\r\n\r\n注：带有下划线的行序号代表本行被填满。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$1 \\leq n \\leq 5 \\times 10^5$\r\n\r\n$1 \\leq m \\leq 10^5$\r\n\r\n$1 \\leq l \\leq r \\leq n,k\\in \\{1,-1\\}$\r\n\r\n\r\n\r\n"}]}