{"title":"nocriz与队列计算机","time_limit":1500,"memory_limit":512,"tags":["2019小学期","2020小学期","数据结构","线段树"],"operation":{"submit":"https://oj.xjtuicpc.com/problem/1053#submit_code","submissions":"https://oj.xjtuicpc.com/submissions?problem_id=1053","statistics":"https://oj.xjtuicpc.com/problem/1053/statistics/fastest","testdata":"https://oj.xjtuicpc.com/problem/1053/testdata","discussion":"https://oj.xjtuicpc.com/discussion/problem/1053"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"`nocriz`是一位来到了西安的同学。\r\n\r\n他在参观兵马俑时，了解到在遥远的秦朝，为了进行复杂的计算，秦始皇发明了队列计算机。兵马俑就是秦始皇为了在地下进一步发展科技而制作的队列计算机模型。\r\n\r\n在此题中，队列计算机被简化成长度为$n$的一个士兵的队列，其中计算元件（士兵）有两种，其中$a_i$为这个士兵的特征值\r\n\r\n- 加法士兵负责从左边读入一个数字$x$，并将$(x+a_i) \\mod 998244353$告诉下一个士兵\r\n- 乘法士兵负责从左边读入一个数字$x$，并将$(x \\times a_i) \\mod 998244353$告诉下一个士兵\r\n\r\n每一次，秦始皇有两个操作：\r\n\r\n- 更换一个士兵，给出新士兵的类型和特征值\r\n- 告诉第$l$个士兵一个数$x$，求第$r$个士兵说出的数字\r\n\r\n秦始皇了解到`nocriz`学习了数据结构，要考考`nocriz`同学，但是他把锅丢给了你。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"一行两个整数$n,q$;\r\n接下来$n$行，每行两个整数$typ_i,a_i$\r\n\r\n- $typ_i = 0$士兵为乘法士兵\r\n- $typ_i = 1$士兵为加法士兵\r\n\r\n接下来$q$行，每行开始一个整数$op$\r\n\r\n- $op = 0$接下来输入$p,typ_p,a_p$，代表修改操作\r\n- $op = 1$接下来输入$l,r,x$，代表询问操作"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每次询问操作，输出一行一个数代表答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 输入样例\r\n```\r\n5 5\r\n0 8\r\n1 5\r\n1 7\r\n1 1\r\n0 8\r\n1 5 5 3\r\n0 2 0 6\r\n0 1 1 2\r\n0 5 1 6\r\n1 1 5 6\r\n```\r\n\r\n#### 输出样例\r\n```\r\n24\r\n62\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$n,q \\le 5 \\cdot 10^5$\r\n\r\n所有出现过的数字在$[1,998244352]$区间中"}]}