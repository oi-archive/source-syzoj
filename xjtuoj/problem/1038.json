{"title":"1-04E. zzj & liaoy 想要去摄影","time_limit":1125,"memory_limit":512,"tags":["2019小学期","搜索","BFS","状态压缩"],"operation":{"submit":"https://oj.xjtuicpc.com/problem/1038#submit_code","submissions":"https://oj.xjtuicpc.com/submissions?problem_id=1038","statistics":"https://oj.xjtuicpc.com/problem/1038/statistics/fastest","testdata":"https://oj.xjtuicpc.com/problem/1038/testdata","discussion":"https://oj.xjtuicpc.com/discussion/problem/1038"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"摄影是liaoy的一大爱好，碰巧zzj也很感兴趣。于是他们打算这个周末从交大出发，到西安市内中意的一些地点去摄影。zzj和liaoy想要知道他们这次活动最少需要走多少路程（不需要返程）。\r\n\r\n西安市的地图可以视作为一个 $n \\times m$ 的矩形网格图，图上标注了交大的位置（起点）、空地、墙壁、计划地点。墙壁是不可通行的，其他地形都是可通行的。zzj和liaoy从交大出发，每一步可以选择上下左右四个方向移动，目标是到达每个计划地点至少一次，求达成该目标所需的最少步数。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个正整数 $n$ 和 $m$ ，表示地图的大小。\r\n\r\n接下来一共是 $n \\times m$ 的字符串，表示地图的详细地形，其中`'p'`表示交大的位置，`'.'`表示空地，`'#'`表示不可通过的墙，`'@'`表示一个计划地点。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一行一个非负整数，表示达成目标所需的最少步数。\r\n\r\n如果他们不可能完成摄影计划，则输出 $-1$ 。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入1\r\n```plain\r\n2 4\r\n.p..\r\n@##@\r\n```\r\n\r\n#### 样例输出1\r\n```plain\r\n7\r\n```\r\n\r\n#### 样例输入2\r\n```plain\r\n3 3\r\n#@#\r\n#p@\r\n@.#\r\n```\r\n\r\n#### 样例输出2\r\n```plain\r\n6\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$2 \\le n,\\ m \\le 30$\r\n\r\n地图上至少存在一个计划地点，且计划地点的数量不超过 $10$ 个。\r\n\r\n**Hint**\r\n\r\n数据范围不算太大，时间复杂度不卡常数。"}]}