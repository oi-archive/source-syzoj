{"title":"渡渡鸟玩游戏","time_limit":1000,"memory_limit":512,"tags":["2020小学期"],"operation":{"submit":"https://oj.xjtuicpc.com/problem/1174#submit_code","submissions":"https://oj.xjtuicpc.com/submissions?problem_id=1174","statistics":"https://oj.xjtuicpc.com/problem/1174/statistics/fastest","testdata":"https://oj.xjtuicpc.com/problem/1174/testdata","discussion":"https://oj.xjtuicpc.com/discussion/problem/1174"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"渡渡鸟发明了一种天才的游戏！可是它想知道这个游戏是否公平，以及有多么不公平。游戏规则是这样的：\r\n\r\n假设 Alice 和 Bob 在玩游戏，首先他们会得到一个长度为 $n$ 的序列 $a_1 , a_2 , \\cdots , a_n$ ，然后他们会随机生成一个长度为 $n$ 的 $[1,n]$ 的排列 $p_1 , p_2 ,\\cdots , p_n$ ,定义这个排列的分数为 $\\displaystyle\\prod_{i=1}^n a_i^{p_i-1}$ ，之后找来了 Carl 来分配这个分数。\r\n\r\nCarl 将进行若干次操作，每次操作交换这个排列的某相邻两项，直到其变为升序为止。如果交换需要的最小次数为偶数，分数给 Alice，否则给 Bob。\r\n\r\n渡渡鸟想知道，对于一次游戏，Alice 的分数减 Bob 的分数的期望是多少。由于一些原因，你只需要输出期望乘 $n!$ 后模 $10^9 + 7$ 的结果即可。由于一共只有 $n!$ 种可能的游戏状态，所以答案一定会是整数。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个正整数 $n$，表示排列长度 ($2\\leq n\\leq 2000$)。\r\n\r\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$，含义如题目所描述。（$0\\leq a_i< 10^9+7$）"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"仅一个非负整数，表示答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"**样例输入1**\r\n```\r\n3\r\n2 3 4\r\n```\r\n\r\n**样例输出1**\r\n```\r\n2\r\n```\r\n\r\n**样例输入2**\r\n```\r\n3\r\n2 3 3\r\n```\r\n\r\n**样例输出2**\r\n```\r\n0\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"行列式的组合定义"}]}