{"title":"ddd的回文串","time_limit":1000,"memory_limit":512,"tags":["2020寒假入门课程","字符串","图论","Floyd","前缀和"],"operation":{"submit":"https://oj.xjtuicpc.com/problem/1134#submit_code","submissions":"https://oj.xjtuicpc.com/submissions?problem_id=1134","statistics":"https://oj.xjtuicpc.com/problem/1134/statistics/fastest","testdata":"https://oj.xjtuicpc.com/problem/1134/testdata","discussion":"https://oj.xjtuicpc.com/discussion/problem/1134"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"回文串指的是正着读和反着读一样的串，比如 \"abcba\" 和 “ddd” 都是回文串，但 \"cyyakwzk\" 不是。\r\n\r\nddd 现在获得了一个长度为 $n$ 的、由小写字母组成的字符串 $s$。wzk 给了他 $m$ 个转换器，第 $i$ 个转换器拥有参数 $x_i, y_i, c_i$，表示 ddd 可以用这个转换器将任意位置的字母 $x_i$ 以 $c_i$ 的代价变成 $y_i$。同时 cyy 还给了他一个超级转换器，表示他可以以 $T$ 的代价，将任意一个字母变为任意另外一个字母。\r\n\r\nddd 对回文串情有独钟，所以他给出了 $n - k + 1$ 个独立的询问，第 $j$ 个询问表示：如果想把 $s$ 中，以 $j$ 开始的、长度为 $k$ 的子串变为回文串，需要的最小代价是多少。ddd 认为回答这个问题太麻烦了，想委托你告诉他这些询问的答案之和是多少。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行四个整数 $n, m, k, T$，意义如上所述。\r\n\r\n接下来一行，为一个长度为 $n$ 的字符串 $s$，意义如上所述。\r\n\r\n接下来 $m$ 行，每行三个元素 $x, y, c$，意义如上所述。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一行一个整数，表示答案。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n\r\n```plain\r\n3 4 2 5\r\ndbd\r\nd b 4\r\nd a 1\r\na z 1\r\nb z 1\r\n```\r\n\r\n#### 样例输出\r\n\r\n```plain\r\n6\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$1 \\leq k \\leq n \\leq 10^6, 0 \\leq m \\leq 10^6, 1 \\leq T, c \\leq 10^9$\r\n"}]}