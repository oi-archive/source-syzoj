{"title":"「ZJOI2008」树的统计","time_limit":1000,"memory_limit":256,"tags":[],"operation":{"submit":"https://lyoi.cc/problem/135#submit_code","submissions":"https://lyoi.cc/submissions?problem_id=135","statistics":"https://lyoi.cc/problem/135/statistics/fastest","testdata":"https://lyoi.cc/problem/135/testdata","discussion":"https://lyoi.cc/discussion/problem/135"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"一棵树上有 $ n $ 个节点，编号分别为 $ 1 $ 到 $ n $，每个节点都有一个权值 $ w $。  \r\n我们将以下面的形式来要求你对这棵树完成一些操作：\r\n\r\n1. `CHANGE u t`：把结点 $ u $ 的权值改为 $ t $；\r\n2. `QMAX u v`：询问从点 $ u $ 到点 $ v $ 的路径上的节点的最大权值；\r\n3. `QSUM u v`：询问从点 $ u $ 到点 $ v $ 的路径上的节点的权值和。\r\n\r\n注意：从点 $ u $ 到点 $ v $ 的路径上的节点包括 $ u $ 和 $ v $ 本身。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入的第一行为一个整数 $ n $，表示节点的个数。  \r\n接下来 $ n – 1 $ 行，每行 $ 2 $ 个整数 $ a $ 和 $ b $，表示节点 $ a $ 和节点 $ b $ 之间有一条边相连。  \r\n接下来 $ n $ 行，每行一个整数，第 $ i $ 行的整数 $ w_i $ 表示节点 $ i $ 的权值。  \r\n接下来 $ 1 $ 行，为一个整数 $ q $，表示操作的总数。  \r\n接下来 $ q $ 行，每行一个操作，以 `CHANGE u t` 或者 `QMAX u v` 或者 `QSUM u v` 的形式给出。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个 `QMAX` 或者 `QSUM` 的操作，每行输出一个整数表示要求输出的结果。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4\r\n1 2\r\n2 3\r\n4 1\r\n4 2 1 3\r\n12\r\nQMAX 3 4\r\nQMAX 3 3\r\nQMAX 3 2\r\nQMAX 2 3\r\nQSUM 3 4\r\nQSUM 2 1\r\nCHANGE 1 5\r\nQMAX 3 4\r\nCHANGE 3 6\r\nQMAX 3 4\r\nQMAX 2 4\r\nQSUM 3 4\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n4\r\n1\r\n2\r\n2\r\n10\r\n6\r\n5\r\n6\r\n5\r\n16\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $ 100\\% $ 的数据，保证 $ 1 \\leq n \\leq 30000, 0 \\leq q \\leq 200000 $。  \r\n中途操作中保证每个节点的权值 $ w $ 在 $ -30000 $ 到 $ 30000 $ 之间。"}]}