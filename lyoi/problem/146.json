{"title":"「NOI2005」维护数列","time_limit":1000,"memory_limit":64,"tags":[],"operation":{"submit":"https://lyoi.cc/problem/146#submit_code","submissions":"https://lyoi.cc/submissions?problem_id=146","statistics":"https://lyoi.cc/problem/146/statistics/fastest","testdata":"https://lyoi.cc/problem/146/testdata","discussion":"https://lyoi.cc/discussion/problem/146"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"请写一个程序，要求维护一个数列，支持以下 $ 6 $ 种操作。\r\n\r\n|操作 | 输入格式 | 说明|\r\n|:----:|:------------:|:-----:|\r\n| 插入 | `INSERT pos cnt a[1] a[2] ...... a[cnt]` | 在当前数列的第 $ \\text{pos} $ 个数字后插入 $ \\text{cnt} $ 个数字：$ a_1, a_2 \\ldots, a_{\\text{cnt}} $，如果 $ \\text{pos} = 0 $，则在首部插入 |\r\n| 删除 | `DELETE pos cnt` | 从当前数列的第 $ \\text{pos} $ 个数字开始，删除连续的 $ \\text{cnt} $ 个数字 |\r\n| 修改 | `MAKE-SAME pos cnt x` | 将当前数列的第 $ \\text{pos} $ 个数字开始的连续 $ \\text{cnt} $ 个数字统一修改为 $ x $ |\r\n| 翻转 | `REVERSE pos cnt` | 取出当前数列的第 $ \\text{pos} $ 个数字开始的连续 $ \\text{cnt} $ 个数字，翻转后放入原来的位置 |\r\n| 求和 | `GET-SUM pos cnt x` | 计算从当前数列的第 $ \\text{pos} $ 个数字开始的连续 $ \\text{cnt} $ 个数字的和并输出 |\r\n| 最大子段和 | `MAX-SUM` | 求出当前数列中和最大的一段子序列，并输出其和 |"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入的第一行包含两个数 $ N $ 和 $ M $，$ N $ 表示初始时数列中数的个数，$ M $ 表示要进行的操作数目。  \r\n第二行包含 $ N $ 个数字，描述初始时的数列。  \r\n以下 $ M $ 行，每行一条命令，格式参见问题描述中的表格。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于输入数据中的 `GET-SUM` 和 `MAX-SUM` 操作，依次输出结果，每个答案（数字）占一行。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n9 8\r\n2 -6 3 5 1 -5 -3 6 3\r\nGET-SUM 5 4\r\nMAX-SUM\r\nINSERT 8 3 -5 7 2\r\nDELETE 12 1\r\nMAKE-SAME 3 3 2\r\nREVERSE 3 6\r\nGET-SUM 5 4\r\nMAX-SUM\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n-1\r\n10\r\n1\r\n10\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$ 1 \\leq N \\leq 500000, 1 \\leq M \\leq 20000 $  \r\n任何时刻数列中最多含有 $ 500000 $ 个数，数列中任何一个数字均在 $ [-1000, 1000] $ 内；  \r\n插入的数字总数不超过 $ 4 \\times 10 ^ 6 $ 个，输入文件大小不超过 $ 20 \\ \\text{MBytes} $。"}]}