{"title":"「LYOI2016 Summer」莲台野夜行","time_limit":1000,"memory_limit":128,"tags":[],"operation":{"submit":"https://lyoi.cc/problem/48#submit_code","submissions":"https://lyoi.cc/submissions?problem_id=48","statistics":"https://lyoi.cc/problem/48/statistics/fastest","testdata":"https://lyoi.cc/problem/48/testdata","discussion":"https://lyoi.cc/discussion/problem/48"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"在莲子的诱惑（？）下，赫恩终于决定参与莲台野结界缺口探寻之旅。\r\n\r\n不过，她们的旅程貌似被某隙间妖怪知道了（暂时不认为赫恩的二设为真 ……），于是旅程变得十分 …… 诡异 …… 经过莲子的精密考察，莲台野的地形为一个 $ n \\times m $ 的矩形，她们将会从最左上角 $ (1, 1) $ 处开始出发，目的地为坐标 $ (x, y) $ 处。她们每次可以从一个地点移动到相邻的 $ 4 $ 个位置（上下左右），需要消耗 $ 1 $ 单位时间。由于路上有很多障碍，所以她们的路线不得不绕过这些障碍。同时，赫恩发现，隙间妖怪在一些特定坐标 $ (a_i, b_i) $ 处设置了隙间，一旦到达该位置，就会立即被传送至 $ (c_i, d_i) $ 处（传送不消耗时间）。不过，隙间是单向的，也就是说，$ (c_i, d_i) $ 处若没有第二个隙间，则不会被传送至 $ (a_i, b_i) $ 处。当然，隙间妖怪也有不人道的地方，有时会把你传送至障碍物上（这种隙间不可以进入）有时又会让你在隙间间无限传送（一样不可以进入，因为 …… 出不来 ……）。\r\n\r\n莲子和赫恩不想在路上浪费太多时间，碰巧现在莲子正在迟到的路上，赫恩就请求你帮助找到一条最近的通向目的地的路线。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行为两个整数 $ n $ 和 $ m $，为地图的大小。\r\n\r\n之后的 $ n $ 行，每行 $ m $ 个字符。若第 $ i $ 行第 $ j $ 个字符为 `.`，则代表这个位置是空地，可以自由行走；若第 $ i $ 行第 $ j $ 个字符为`*`，则代表这个位置有障碍，无法通行。之后的 $ 1 $ 行，有一个整数 $ q $，为隙间的数量（可以为 $ 0 $）。\r\n\r\n接下来 $ q $ 行，每行四个整数 $ a_i $、$ b_i $、$ c_i $、$ d_i $，含义如题目描述。接下来是最后一行，两个整数 $ x $ 和 $ y $，表示目的地的坐标。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"若从 $ (1, 1) $ 处可以到达 $ (x, y) $ 处，输出一个正整数，为需要消耗的最少时间。若无法到达，输出一行 `No solution`。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 输入样例\r\n```plain\r\n3 4\r\n..*.\r\n..*.\r\n..*.\r\n2\r\n2 2 2 4\r\n3 1 1 4\r\n3 4\r\n```\r\n\r\n#### 输出样例\r\n```plain\r\n3\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$ 20\\% $ 的数据：$ 0 < n, m \\leq 50, 0 \\leq q \\leq 10 $；  \r\n$ 50\\% $ 的数据：$ 0 < n, m \\leq 200, 0 \\leq q \\leq 30 $；  \r\n$ 80\\% $ 的数据：$ 0 < n, m \\leq 500, 0 \\leq q \\leq 70 $；  \r\n$ 100\\% $ 的数据：$ 0 < n, m \\leq 1000, 0 \\leq q \\leq 100 $。"}]}