{"title":"「集训队互测 2015」Robot","time_limit":1000,"memory_limit":256,"tags":[],"operation":{"submit":"https://lyoi.cc/problem/171#submit_code","submissions":"https://lyoi.cc/submissions?problem_id=171","statistics":"https://lyoi.cc/problem/171/statistics/fastest","testdata":"https://lyoi.cc/problem/171/testdata","discussion":"https://lyoi.cc/discussion/problem/171"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"小 q 有 $ n $ 只机器人，一开始他把机器人放在了一条数轴上，第 $ i $ 只机器人在 $ a_i $ 的位置上静止，而自己站在原点。\r\n\r\n在这之后小 q 会执行一些操作，他想要命令一个机器人向左或者向右移动 $ x $ 格。但是机器人似乎听不清小 q 的命令，事实上它们会以每秒 $ x $ 格的速度匀速移动。\r\n\r\n看着自己的机器人越走越远，小 q 很着急，他想知道当前离他（原点）最远的机器人有多远。\r\n\r\n具体的操作以及询问见输入格式。注意，不同的机器人之间互不影响，即不用考虑两个机器人撞在了一起的情况。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"共有 $ m $ 个事件，输入将会按事件的时间顺序给出。\r\n\r\n第一行两个正整数 $ n $、$ m $。\r\n\r\n接下来一行 $ n $ 个整数，第 $ i $ 个数是 $ a_i $，表示第 $ i $ 个机器人初始的位置（初始移动速度为 $ 0 $）。\r\n\r\n接下来 $ m $ 行，每行行首是一个非负整数 $ t_i $，表示该事件点发生的时刻（以秒为单位）。第二个是一个字符串 $ S $，代表操作的种类。数字与字符串之间用一个空格隔开。接下来的输入按 $ S $ 的种类分类。\r\n\r\n1. 若 $ S $ 是 `command`，则接下来两个整数 $ k_i $、$ x_i $，表示小 q 对第 $ k_i $ 个机器人执行了操作，该机器人的速度将会被重置，变为向数轴正方向每秒移动 $ x_i $ 格（若 $ x_i $ 为负数就相当于向数轴负方向每秒移动 $ \\lvert x_i \\rvert $ 格）。保证 $ 1 \\leq k_i \\leq n $。\r\n2. 若 $ S $ 是 `query`，则你需要输出当前离原点最远的机器人有多远。\r\n\r\n保证 $ t_1 \\leq t_2 \\leq t_2 \\leq \\dots \\leq t_m $。\r\n\r\n（注：若同一时间发生多次操作，则按读入顺序依次执行）"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个 `query` 询问，输出一行，包含一个整数表示正确的答案。\r\n\r\n由于本题数据量较大，建议不要使用 `cin`/`cout` 进行输入输出。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```lisp\r\n4 5\r\n-20 0 20 100\r\n10 command 1 10\r\n20 command 3 -10\r\n30 query\r\n40 command 1 -30\r\n50 query\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n180\r\n280\r\n```\r\n\r\n#### 样例解释\r\n第一个命令执行时，各个机器人的位置为：$ -20, 0, 20, 100 $。  \r\n第二个命令执行时，各个机器人的位置为：$ 80, 0, 20, 100 $。  \r\n第一个询问时，各个机器人的位置为：$ 180, 0, -80, 100 $。  \r\n第三个命令执行时，各个机器人的位置为：$ 280, 0, -180, 100 $。  \r\n第二个询问时，各个机器人的位置为：$ -20, 0, -280, 100 $。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"设 `command` 的个数为 $ C $，`query` 的个数为 $ Q $。（所以 $ C + Q = m $）\r\n\r\n对于所有的事件满足 $ 0 \\leq t_i \\leq 10 ^ 9 $，对于所有的 `command` 满足 $ \\lvert x_i \\rvert \\leq 10 ^ 4 $。\r\n\r\n对于所有的机器人满足 $ \\lvert a_i \\rvert \\leq 10 ^ 9 $。\r\n\r\n对于 $ 100\\% $ 的数据，$ n, C \\leq 10^5, Q \\leq 5 \\times 10^5 $。"}]}