{"title":"「联合省选 2020 A」树（样例数据）","time_limit":2000,"memory_limit":512,"tags":[],"operation":{"submit":"https://syzoj.com/problem/836#submit_code","submissions":"https://syzoj.com/submissions?problem_id=836","statistics":"https://syzoj.com/problem/836/statistics/fastest","testdata":"https://syzoj.com/problem/836/testdata","discussion":"https://syzoj.com/discussion/problem/836"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给定一棵 $n$ 个结点的有根树 $T$，结点从 $1$ 开始编号，根结点为 $1$ 号结点，每个结点有一个正整数权值 $v_i$。\r\n\r\n设 $x$ 号结点的子树内（包含 $x$ 自身）的所有结点编号为 $c_1, c_2, \\dots, c_k$，定义 $x$ 的价值为：\r\n\r\n$$\r\nval(x) = (v_{c_1} + d(c_1, x)) \\oplus (v_{c_2} + d(c_2, x)) \\oplus \\cdots \\oplus (v_{c_k} + d(c_k, x))\r\n$$\r\n\r\n其中 $d(x, y)$ 表示树上 $x$ 号结点与 $y$ 号结点间唯一简单路径所包含的边数，$d(x, x) = 0$。$\\oplus$ 表示异或运算。\r\n\r\n请你求出 $\\sum_{i=1}^n val(i)$ 的结果。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个正整数 $n$ 表示树的大小。\r\n\r\n第二行 $n$ 个正整数表示 $v_i$。\r\n\r\n接下来一行 $n-1$ 个正整数，依次表示 $2$ 号结点到 $n$ 号结点，每个结点的父亲编号 $p_i$。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"仅一行一个整数表示答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n\r\n```plain\r\n5\r\n5 4 1 2 3\r\n1 1 2 2\r\n```\r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\n12\r\n```\r\n\r\n#### 样例解释 1\r\n\r\n$val(1) = (5 + 0)\\oplus(4 + 1)\\oplus(1 + 1)\\oplus(2 + 2)\\oplus(3 + 2) = 3$。\r\n\r\n$val(2) = (4 + 0)\\oplus(2 + 1)\\oplus(3 + 1) = 3$。\r\n\r\n$val(3) = (1 + 0) = 1$。\r\n\r\n$val(4) = (2 + 0) = 2$。\r\n\r\n$val(5) = (3 + 0) = 3$。\r\n\r\n和为 $12$。\r\n\r\n#### 样例 2\r\n\r\n见附加文件中 `tree2.in` 与 `tree2.ans`。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$10\\%$ 的数据：$1\\le n\\le 2501$。\r\n\r\n$40\\%$ 的数据：$1\\le n\\le 152501$。\r\n\r\n另有 $20\\%$ 的数据：所有 $p_i = i - 1 (2\\le i\\le n)$。\r\n\r\n另有 $20\\%$ 的数据：所有 $v_i = 1 (1\\le i\\le n)$。\r\n\r\n$100\\%$ 的数据：$1\\le n, v_i \\le 525010, 1\\le p_i\\le n$。\r\n"}]}