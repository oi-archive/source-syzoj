{"title":" [SCOI2010]序列操作","time_limit":1000,"memory_limit":125,"tags":["线段树","珂朵莉树"],"operation":{"submit":"https://syzoj.com/problem/675#submit_code","submissions":"https://syzoj.com/submissions?problem_id=675","statistics":"https://syzoj.com/problem/675/statistics/fastest","testdata":"https://syzoj.com/problem/675/testdata","discussion":"https://syzoj.com/discussion/problem/675"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"lxhgww 最近收到了一个 01 序列，序列里面包含了 $n$ 个数，这些数要么是 $0$，要么是 $1$，现在对于这个序列有五种变换操作和询问操作：\r\n\r\n$0$ $a$ $b$ 把 $[a, b]$ 区间内的所有数全变成 $0$\r\n\r\n$1$ $a$ $b$ 把 $[a, b]$ 区间内的所有数全变成 $1$\r\n\r\n$2$ $a$ $b$ 把 $[a,b]$ 区间内的所有数全部取反，也就是说把所有的 $0$ 变成 $1$，把所有的 $1$ 变成 $0$\r\n\r\n$3$ $a$ $b$ 询问 $[a, b]$ 区间内总共有多少个 $1$\r\n\r\n$4$ $a$ $b$ 询问 $[a, b]$ 区间内最多有多少个连续的 $1$\r\n\r\n对于每一种询问操作，lxhgww 都需要给出回答，聪明的程序员们，你们能帮助他吗？"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入数据第一行包括 $2$ 个数，$n$ 和 $m$ ，分别表示序列的长度和操作数目\r\n\r\n第二行包括 $n$ 个数，表示序列的初始状态\r\n\r\n接下来 $m$ 行，每行 $3$ 个数，$op$ , $a$ , $b$ ，（$0 \\le op \\le 4$，$0 \\le a \\le b \\lt n$）表示对于区间 $[a, b]$ 执行标号为 $op$ 的操作"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每一个询问操作，输出一行，包括 $1$ 个数，表示其对应的答案"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"input\r\n```cpp\r\n10 10\r\n0 0 0 1 1 0 1 0 1 1\r\n1 0 2\r\n3 0 5\r\n2 2 2\r\n4 0 4\r\n0 3 6\r\n2 3 7\r\n4 2 8\r\n1 0 5\r\n0 5 6\r\n3 3 9\r\n```\r\n\r\noutput\r\n```cpp\r\n5\r\n2\r\n6\r\n5\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $30\\%$ 的数据，$1 \\le n, m \\le 1000$\r\n\r\n对于 $100\\%$ 的数据，$1 \\le n, m \\le 100000$"}]}