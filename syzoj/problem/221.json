{"title":"[HAOI2015]树上操作","time_limit":1000,"memory_limit":128,"tags":["树链剖分"],"operation":{"submit":"https://syzoj.com/problem/221#submit_code","submissions":"https://syzoj.com/submissions?problem_id=221","statistics":"https://syzoj.com/problem/221/statistics/fastest","testdata":"https://syzoj.com/problem/221/testdata","discussion":"https://syzoj.com/discussion/problem/221"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"有一棵点数为N的树，以点1为根，且树点有边权。然后有M个操作，分为三种： \r\n\r\n操作1：把某个节点x的点权增加a。 \r\n\r\n操作2：把某个节点x为根的子树中所有点的点权都增加a。 \r\n\r\n操作3：询问某个节点x到根的路径中所有点的点权和\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个整数N,M，表示点数和操作数。 \r\n\r\n接下来一行N个整数，表示树中节点的初始权值。 \r\n\r\n接下来N-1行每行两个正整数fr,to，表示该树中存在一条边(fr,to)。 \r\n\r\n再接下来M行，每行分别表示一次操作。其中第一个数表示该操作的种类（1~3），之后接这个操作的参数（x或者x a）。 \r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个询问操作，输出该询问的答案。答案之间用换行隔开。 "},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#input\r\n```\r\n5 5 \r\n1 2 3 4 5 \r\n1 2 \r\n1 4 \r\n2 3 \r\n2 5 \r\n3 3 \r\n1 2 1 \r\n3 5 \r\n2 1 2 \r\n3 3 \r\n```\r\n\r\n#output\r\n```\r\n6 \r\n9 \r\n13 \r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于30%的数据，N,M<=1000 \r\n\r\n对于50%的数据，N,M<=100000且数据随机。 \r\n\r\n对于100%的数据，N,M<=100000，且所有输入数据的绝对值都不会超过10^6。 \r\n"}]}