{"title":"年功序列","time_limit":1000,"memory_limit":512,"tags":["拓扑排序","搜索"],"operation":{"submit":"https://syzoj.com/problem/731#submit_code","submissions":"https://syzoj.com/submissions?problem_id=731","statistics":"https://syzoj.com/problem/731/statistics/fastest","testdata":"https://syzoj.com/problem/731/testdata","discussion":"https://syzoj.com/discussion/problem/731"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"在虚拟国度里多了很多Virtual oier，为了树立对后辈的威信，从第 $1$ 个Virtual oier开始的oier们搞起了年功序列的制度。\r\n\r\n虚拟国度的创始人第 $0$ 个oier Chtholly感觉非常有趣，于是他决定观测 $1$ 到 $n$ 这些人，他观测到了一些有趣的现象：虚拟国度里有一些凳子，如果 $a$ 是 $b$ 的先辈则 $a$ 能在 $b$ 前面得到凳子\r\n\r\nChtholly的观测可以构成 $m$ 个序列，每个序列有 $k$ 个元素，$a_{1} , a_{2} , a_{3} ... a_{k}$ 。表示 $a_{2}$ 在有凳子前 $a_{1}$ 必须有凳子，$a_{k}$ 有凳子前当且仅当 前 $a_{1}$ , $a_{2}$ , $a_{3}$ ... $a_{k-1}$有凳子。\r\n\r\n例如 $k=3$ 时， $1$ ，$2$， $3$ 表示 $3$ 有凳子前 $1$ ， $2$ 必须有凳子， $2$ 有凳子前 $1$ 必须有凳子。\r\n\r\n但Chtholly年纪大了记忆力未必好，如果第 $i$ 个序列与前 $i-1$ 个序列冲突的话那么就只需要考虑前 $i-1$ 个序列就好了。\r\n\r\nChtholly希望知道 $1$ 到 $n$ 个人的年功序列的最小字典序。\r\n\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个数 $n$ ，$m$\r\n\r\n接下来 $m$ 行每行第一个数为 $k$ ，接下来 $k$ 个数为这次观测构成的序列"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 $n$个数构成的最小字典序。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"**input**\r\n```\r\n4 3\r\n3 1 2 3\r\n2 4 2\r\n3 3 4 1\r\n```\r\n**output**\r\n```\r\n1 4 2 3\r\n```\r\n\r\n第三个观测序列与前两个观测序列冲突不考虑，前两个观测序列可以构成1 4 2 3或者4 1 2 3这两个序列，字典序小的为1 4 2 3"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$30\\%$ 的数据 $N \\le 10,M \\le 4$;\r\n\r\n$50\\%$ 的数据 $N \\le 10000,M \\le 5000$;\r\n\r\n$100\\%$ 的数据 $N \\le 100000,M \\le 50000,k \\le n$;"}]}