{"title":"「HAOI2015」树上操作","time_limit":1000,"memory_limit":256,"tags":["2015","HAOI","线段树","树链剖分","数据结构"],"operation":{"submit":"https://syzoj.com/problem/823#submit_code","submissions":"https://syzoj.com/submissions?problem_id=823","statistics":"https://syzoj.com/problem/823/statistics/fastest","testdata":"https://syzoj.com/problem/823/testdata","discussion":"https://syzoj.com/discussion/problem/823"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"有一棵点数为 $N$ 的树，以点 $1$ 为根，且树有点权。然后有 $M$ 个操作，分为三种：\r\n\r\n1. 把某个节点 $x$ 的点权增加 $a$ 。\r\n2. 把某个节点 $x$ 为根的子树中所有点的点权都增加 $a$ 。\r\n3. 询问某个节点 $x$ 到根的路径中所有点的点权和。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含两个整数 $N, M$。表示点数和操作数。  \r\n接下来一行 $N$ 个整数，表示树中节点的初始权值。  \r\n接下来 $N-1$ 行每行两个正整数 $\\text{fr}, \\text{to}$ ， 表示该树中存在一条边 $(\\text{fr}, \\text{to})$ 。  \r\n再接下来 $M$ 行，每行分别表示一次操作。其中第一个数表示该操作的种类（``1``-``3``） ，之后接这个操作的参数（``x`` 或者 ``x a``） 。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个询问操作，输出该询问的答案。答案之间用换行隔开。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5 5\r\n1 2 3 4 5\r\n1 2\r\n1 4\r\n2 3\r\n2 5\r\n3 3\r\n1 2 1\r\n3 5\r\n2 1 2\r\n3 3\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n6\r\n9\r\n13\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100 \\%$ 的数据， $N,M \\leq 10^5$ ，且所有输入数据的绝对值都不会超过 $10^6$ 。"}]}