{"title":"「是男人就过8题——Pony.ai」PerfectNPArray","time_limit":3000,"memory_limit":256,"tags":[],"operation":{"submit":"https://syzoj.com/problem/692#submit_code","submissions":"https://syzoj.com/submissions?problem_id=692","statistics":"https://syzoj.com/problem/692/statistics/fastest","testdata":"https://syzoj.com/problem/692/testdata","discussion":"https://syzoj.com/discussion/problem/692"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"我们定义满足如下条件的数列是完美的：   \r\n - 由 $-1$ 和 $1$ 组成。   \r\n - 它的任一前缀和都不小于 $0$ 。   \r\n - 数列的各项和为 $0$ 。   \r\n\r\n下面列出一些完美的数列作为例子：   \r\n - $1, 1, 1, -1, -1, -1$    \r\n - $1,-1,1,1,-1,-1$   \r\n\r\n而如下的数列则不完美：\r\n - $-1,1$   \r\n - $1,-1,-1,1$\r\n\r\n一个完美数列的 NP 值是这个数列的前缀和中最大的那个的值。比如，前文提到的两个完美数列的 NP 值分别为 $3$ 和 $2$ 。  \r\n\r\n给一棵树，这棵树的每个节点都被赋予了一个权值 $-1$ 或 $1$ ，请找出一条简单路径，使得由这个路径上各点权值组成的数列是完美数列，且这个数列的 NP 值最大。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入包含多个测试数据。\r\n\r\n每个测试数据第一行是一个整数 $n$ ，代表这棵树有 $n$ 个节点。\r\n\r\n接下来有 $n$ 行，第 $i$ 行有两个用空格分开的数字 $f_i$ 和 $v_i$ ($v_i \\in \\{-1,1\\}$)  ，表示第 $i$ 个点的父节点和第 $i$ 个点的权值。节点被编号为 $1$ 到 $n$ ，如果 $f_i=0$ ，那么节点 $i$ 是这棵树的根。\r\n\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个测试数据，输出每棵树的最大 NP 值，如果这样的路径不存在，输出 $0$ 。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n5\r\n0 -1\r\n1 1\r\n1 -1\r\n2 1\r\n2 -1\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n2\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据， $1 \\leq n \\leq 10^6$ ，且每个测试点所有测试数据的 $n$ 的总和不会超过 $5 \\times 10^6$ 。"}]}