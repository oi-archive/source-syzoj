{"title":"一道可以暴力的可持久化线段树","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://syzoj.com/problem/421#submit_code","submissions":"https://syzoj.com/submissions?problem_id=421","statistics":"https://syzoj.com/problem/421/statistics/fastest","testdata":"https://syzoj.com/problem/421/testdata","discussion":"https://syzoj.com/discussion/problem/421"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"此题由题目[#247](https://syzoj.com/problem/247)改编，是一道暴力也可以拿大部分分数的可持久化线段树，目的在于联系线段树基本操作和可持久化思想。\r\n题目要求你完成两个操作：\r\n>Q k l r 查询数列在第k个版本时，区间[l, r]上的最大值\r\n\r\n\r\n>M k p v 把数列在第k个版本时的第p个数修改为v，并产生一个新的数列版本\r\n\r\n请你编写一个程序完成以上两点要求"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个整数N, Q。N是数列的长度，Q表示询问数\r\n\r\n第二行N个整数，是这个数列\r\n\r\n之后Q行，每行以0或者1开头，0表示查询操作Q，1表示修改操作M，格式为\r\n\r\n0 k l r 查询数列在第k个版本时，区间[l, r]上的最大值 或者\r\n\r\n1 k p v 把数列在第k个版本时的第p个数修改为v，并产生一个新的数列版本"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个M询问，输出正确答案"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":">intput\r\n\r\n```\r\n4 5\r\n1 2 3 4\r\n0 1 1 4\r\n1 1 3 5\r\n0 2 1 3\r\n0 2 4 4\r\n0 1 2 4\r\n```\r\n\r\n>output\r\n\r\n```\r\n4\r\n5\r\n4\r\n4\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"N <= 1000\r\n\r\nQ <= 10000\r\n\r\n对于每次询问操作的版本号k保证合法，区间[l, r]一定满足1 <= l <= r <= N"}]}