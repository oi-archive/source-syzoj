{"title":"DFS 序 ，树上差分 ","time_limit":2000,"memory_limit":256,"tags":[],"operation":{"submit":"https://syzoj.com/problem/594#submit_code","submissions":"https://syzoj.com/submissions?problem_id=594","statistics":"https://syzoj.com/problem/594/statistics/fastest","testdata":"https://syzoj.com/problem/594/testdata","discussion":"https://syzoj.com/discussion/problem/594"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"这是一道模板题。\r\n\r\n不保证无快读的程序能过。请务必使用快读。\r\n\r\n给一棵有根树，这棵树由编号为 $1\\dots N$ 的 $N$ 个结点组成。根结点的编号为 $R$。每个结点都有一个权值，结点 $i$ 的权值为 $v_i$。  \r\n接下来有 $M$ 组操作，操作分为两类：\r\n\r\n* `1 a b x`，表示将「结点 $a$ 到结点 $b$ 的简单路径」上所有结点的权值都增加 $x$；\r\n* `2 a`，表示求结点 $a$ 的权值。\r\n* `3 a`，表示求 $a$ 的子树上所有结点的权值之和。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有三个整数 $N,M$ 和 $R$。  \r\n第二行有 $N$ 个整数，第 $i$ 个整数表示 $v_i$。  \r\n在接下来的 $N-1$ 行中，每行两个整数，表示一条边。  \r\n在接下来的 $M$ 行中，每行一组操作。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每组 $\\texttt{2 a}$ 操作，输出一个整数，表示结点 $a$ 的权值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n10 15 3\r\n4 8 -2 -4 -7 -7 -9 5 2 5\r\n3 9\r\n3 4\r\n4 5\r\n4 8\r\n8 7\r\n3 6\r\n8 2\r\n9 10\r\n2 1\r\n2 5\r\n1 4 7 3\r\n1 7 2 6\r\n1 6 7 -7\r\n2 1\r\n1 10 10 -9\r\n2 4\r\n1 2 9 -8\r\n2 6\r\n1 10 5 -2\r\n1 4 4 6\r\n1 6 1 3\r\n1 1 10 2\r\n1 9 2 0\r\n2 7\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n-7\r\n4\r\n-8\r\n-14\r\n-7\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n10 17 3\r\n5 1 -7 -9 -5 3 -7 -5 3 3\r\n1 8\r\n8 7\r\n7 6\r\n8 3\r\n6 10\r\n7 2\r\n6 9\r\n1 4\r\n6 5\r\n2 9\r\n1 10 4 -2\r\n2 8\r\n1 1 10 -2\r\n3 5\r\n1 10 6 -3\r\n3 1\r\n1 6 5 9\r\n2 8\r\n1 4 5 1\r\n2 10\r\n1 2 5 6\r\n1 2 6 0\r\n1 2 7 -5\r\n1 4 9 6\r\n1 10 1 0\r\n3 2\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n3\r\n-7\r\n-5\r\n-10\r\n-9\r\n-4\r\n2\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$40\\%$ 的数据不含操作 3。  \r\n对于所有数据，$1\\leqslant N, M\\leqslant 10^6,$ $1\\leqslant R\\leqslant N,$ $-10^6\\leqslant v_i, x\\leqslant 10^6$."}]}