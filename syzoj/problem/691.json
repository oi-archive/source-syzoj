{"title":"「是男人就过8题——Pony.ai」NumberLink","time_limit":4000,"memory_limit":256,"tags":[],"operation":{"submit":"https://syzoj.com/problem/691#submit_code","submissions":"https://syzoj.com/submissions?problem_id=691","statistics":"https://syzoj.com/problem/691/statistics/fastest","testdata":"https://syzoj.com/problem/691/testdata","discussion":"https://syzoj.com/discussion/problem/691"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"有一个 <del> w \\times h</del>  $n \\times m$ 的网格，其中的 $2d$ 格包含整数 $1, 1, 2, 2, \\ldots d, d$ ，保证这些格子都在网格的边界上。 (即第一行，第一列，第 $n$ 行或 第 $m$ 列)\r\n\r\n你需要画出 $d$ 条路径以连接这 $d$ 对格子，每条路径由若干个竖直或水平的线段组成，路径不能走出网格，第 $i$ 条路径必须从数字 $i$ 所在的一个格子开始，并在另一个写着数字 $i$ 的格子结束，路径可以在某格的中心前进、左右转，但路径不能多次穿过同一个格子，两条不同的路径不能有公共点。格子允许不被经过。\r\n\r\n![number_link.png](https://i.loli.net/2018/05/14/5af9869e341f2.png)\r\n\r\n给定这个网格，你需要构造一个合法的方案。如果不能，请输出 ```Impossible``` 。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"每个测试点包含多组数据。\r\n\r\n对于每组数据，第一行包含三个整数 $n,m,d$ 。\r\n\r\n接下来 $d$ 行，第 $i$ 行包含四个整数 $x_1,y_1,x_2,y_2$  ($1\\leq x_1,x_2\\leq n$, and $1\\leq y_1,y_2\\leq m$), 表示包含数字 $i$ 的两个格子的左边分别为 $(x_1,y_1), (x_2,y_2)$，这 $2d$ 个格子互不相同且保证在网格的边界上，左上角的格子坐标为 $(1,1)$, 右下角的是 $(n,m)$ 。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每组数据，如果不可能画出这样的路径，输出一行 ```Impossible``` 。否则，在第一行输出 ```Possible``` ，并随后输出一个 $n$ 行 $m$ 列的包含你的方案的字符矩阵，格式如下。\r\n\r\n对于在输入中有数字的格子，用 `<`, `>`, `^`,`v` （分别代表左，右，上，下）来表示你设计的路径在这一格上的方向。\r\n\r\n对于在输入中没有数字的路径经过的格子，使用 `7`, `L`, `r`, `J`, `-`, `|` （分别代表左下，右上，右下，左上，横向，纵向）来表示你设计的路径在这一格上的方向。\r\n\r\n对于其它的格子，输出 `.` 既可。\r\n\r\n数据不保证唯一解，你只需要输出一组可行解即可。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n6 5 3\r\n5 1 1 3\r\n6 3 2 5\r\n6 2 6 1\r\n3 3 4\r\n1 1 2 1\r\n1 2 3 3\r\n1 3 2 3\r\n3 1 3 2\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\nPossible\r\n.r<..\r\n.L7.v\r\nr-J.|\r\n|...|\r\n^...|\r\n><>-J\r\nImpossible\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据， $1\\leq n,m\\leq 2000$, $d\\ge 1$ 。\r\n\r\n每个测试点中最多有 $50000$ 组测试数据，其中 $\\sum nm$ 最多为 $4 \\times 10^7$ 。"}]}