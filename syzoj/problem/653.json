{"title":"黑暗城堡","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://syzoj.com/problem/653#submit_code","submissions":"https://syzoj.com/submissions?problem_id=653","statistics":"https://syzoj.com/problem/653/statistics/fastest","testdata":"https://syzoj.com/problem/653/testdata","discussion":"https://syzoj.com/discussion/problem/653"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"在顺利攻破Lord lsp的防线之后，lqr一行人来到了Lord lsp的城堡下方。\r\n\r\nLord lsp黑化之后虽然拥有了强大的超能力，能够用意念力制造建筑物，但是智商水平却没怎么增加。\r\n\r\n现在lqr已经搞清楚黑暗城堡有N个房间，M条可以制造的双向通道，以及每条通道的长度。\r\n\r\nlqr深知Lord lsp的想法，为了避免每次都要琢磨两个房间之间的最短路径，Lord lsp一定会把城堡修建成树形的。\r\n\r\n但是，为了尽量提高自己的移动效率，Lord lsp一定会使得城堡满足下面的条件：\r\n\r\n设 D[i] 为如果所有的通道都被修建，第 i 号房间与第1号房间的最短路径长度；而 S[i] 为实际修建的树形城堡中第 i 号房间与第1号房间的路径长度；要求对于所有整数 i，有 S[i]=D[i] 成立。\r\n\r\n为了打败Lord lsp，lqr想知道有多少种不同的城堡修建方案。\r\n\r\n你需要输出答案对 $2^{31}–1$ 取模之后的结果。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有两个整数 N 和 M。\r\n\r\n之后 M 行，每行三个整数X，Y 和L，表示可以修建 X 和 Y 之间的一条长度为 L 的通道。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一个整数，表示答案对 $2^{31}–1$ 取模之后的结果。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 输入样例： \r\n```plain\r\n3 3\r\n1 2 2\r\n1 3 1\r\n2 3 1\r\n``` \r\n\r\n#### 输出样例：\r\n```plain\r\n2\r\n```\r\n"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"$2 ≤ N ≤ 1000,$     \r\n$N − 1 ≤ M ≤ N ( N − 1 ) /2,$      \r\n$1 ≤ L ≤ 100$      "}]}