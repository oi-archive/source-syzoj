{"title":"最大数","time_limit":1000,"memory_limit":512,"tags":["线段树"],"operation":{"submit":"https://syzoj.com/problem/819#submit_code","submissions":"https://syzoj.com/submissions?problem_id=819","statistics":"https://syzoj.com/problem/819/statistics/fastest","testdata":"https://syzoj.com/problem/819/testdata","discussion":"https://syzoj.com/discussion/problem/819"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**原题来自：JSOI 2008**\r\n\r\n给定一个正整数数列 $a_1, a_2, a_3, \\cdots , a_n$，每一个数都在 $0\\sim p – 1$ 之间。可以对这列数进行两种操作：\r\n+ 添加操作：向序列后添加一个数，序列长度变成 $n + 1$；\r\n+ 询问操作：询问这个序列中最后 $L$ 个数中最大的数是多少。\r\n\r\n程序运行的最开始，整数序列为空。写一个程序，读入操作的序列，并输出询问操作的答案。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有两个正整数 $m,p$，意义如题目描述；\r\n\r\n接下来 $m$ 行，每一行表示一个操作。如果该行的内容是 `Q L`，则表示这个操作是询问序列中最后 $L$ 个数的最大数是多少；如果是 `A t`，则表示向序列后面加一个数，加入的数是 $(t+a)\\bmod p$。其中，$t$ 是输入的参数，$a$ 是在这个添加操作之前最后一个询问操作的答案（如果之前没有询问操作，则 $a = 0$）。\r\n\r\n第一个操作一定是添加操作。对于询问操作，$L\\gt 0$ 且不超过当前序列的长度。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每一个询问操作，输出一行。该行只有一个数，即序列中最后 $L$ 个数的最大数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n10 100\r\nA 97\r\nQ 1\r\nQ 1\r\nA 17\r\nQ 2\r\nA 63\r\nQ 1\r\nQ 1\r\nQ 3\r\nA 99\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n97\r\n97\r\n97\r\n60\r\n60\r\n97\r\n```\r\n\r\n#### 样例说明\r\n最后的序列是 $97,14,60,96$。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1\\le m\\le 2\\times 10^5,1\\le p\\le 2\\times 10^9,0\\le t\\lt p$。"}]}