{"title":"推箱子","time_limit":1000,"memory_limit":256,"tags":[],"operation":{"submit":"https://syzoj.com/problem/153#submit_code","submissions":"https://syzoj.com/submissions?problem_id=153","statistics":"https://syzoj.com/problem/153/statistics/fastest","testdata":"https://syzoj.com/problem/153/testdata","discussion":"https://syzoj.com/discussion/problem/153"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给定一个只有一个箱子的Sokoban地图，你想知道能否完成游戏。\r\n\r\n如果有多种方案，选择推动箱子次数最少的。\r\n\r\n如果仍有多种方案，选择人物移动次数最少的。\r\n\r\n[Sokoban游戏规则](https://en.wikipedia.org/wiki/Sokoban#Rules)\r\n\r\n在这个题目中，给定一个 n 行 m 列的地图，其中'.'表示空地，'#'表示障碍物。\r\n\r\n1.你可以控制人物可以上下左右移动，推动箱子，但是不能有障碍物阻挡。\r\n\r\n2.任何时刻人物和箱子都不能离开地图。\r\n\r\n3.如果人物初始位置，箱子初始位置或箱子目标位置有障碍，你可以直接认为游戏无解。\r\n\r\n4.如果人物初始位置和箱子初始位置相同，你可以直接认为游戏无解。\r\n\r\nSokoban游戏的解的复杂度被数学家证明了达到NP难（NP-hard）的程度，后来更被证明了它是PSPACE完全的。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行3个正整数 n，m，q 分别表示地图的行数，列数和游戏次数。\r\n\r\n接下来 n 行每行一个长度为 m 的字符串，其中'.'表示空地，'#'表示障碍物。\r\n\r\n接下来 q 行每行 6 个整数 px, py, sx, sy, tx, ty, 分别表示人物初始位置，箱子初始位置或箱子目标位置。\r\n\r\n人物初始位置为第 px 行第 py 列。\r\n\r\n箱子初始位置为第 sx 行第 sy 列。\r\n\r\n箱子目标位置为第 tx 行第 ty 列。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出 q 行，如果游戏无解，输出\"-1 -1\"(不含引号)。\r\n\r\n否则输出两个非负整数，第一个是推动箱子的次数，第二个是移动但不推动箱子的次数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"### 样例输入\r\n~~~\r\n7 11 1\r\n###########\r\n#.##......#\r\n#.#.#..####\r\n#.........#\r\n#.######..#\r\n#.........#\r\n###########\r\n6 7 4 6 2 2\r\n~~~\r\n\r\n### 样例输出\r\n\r\n~~~\r\n6 22\r\n~~~\r\n\r\n### 样例解释\r\n\r\n第 1 次操作，人物向右移动  \r\n第 2 次操作，人物向右移动  \r\n第 3 次操作，人物向上移动  \r\n第 4 次操作，人物向上移动  \r\n第 5 次操作，人物向左移动  \r\n第 6 次操作，人物向左移动  \r\n第 7 次操作，人物向左移动，推动箱子  \r\n第 8 次操作，人物向左移动，推动箱子  \r\n第 9 次操作，人物向左移动，推动箱子  \r\n第 10 次操作，人物向左移动，推动箱子  \r\n第 11 次操作，人物向右移动  \r\n第 12 次操作，人物向右移动  \r\n第 13 次操作，人物向右移动  \r\n第 14 次操作，人物向右移动  \r\n第 15 次操作，人物向右移动  \r\n第 16 次操作，人物向右移动  \r\n第 17 次操作，人物向下移动  \r\n第 18 次操作，人物向下移动  \r\n第 19 次操作，人物向左移动  \r\n第 20 次操作，人物向左移动  \r\n第 21 次操作，人物向左移动  \r\n第 22 次操作，人物向左移动  \r\n第 23 次操作，人物向左移动  \r\n第 24 次操作，人物向左移动  \r\n第 25 次操作，人物向左移动  \r\n第 26 次操作，人物向上移动  \r\n第 27 次操作，人物向上移动，推动箱子  \r\n第 28 次操作，人物向上移动，推动箱子  \r\n\r\n箱子到达目标位置，完成游戏。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于前 30% 的数据，1 <= n, m <= 10，q = 1\r\n\r\n对于前 60% 的数据，1 <= n, m <= 30，q <= 10\r\n\r\n对于 100% 的数据，1 <= n, m <= 30，q <= 5000，数据均为随机生成。\r\n\r\n1 <= px, sx, tx <= n, 1 <= py, sy, ty <= m"}]}