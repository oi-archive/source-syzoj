{"title":"[NOIP 2018PJ] 对称二叉树","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://syzoj.com/problem/479#submit_code","submissions":"https://syzoj.com/submissions?problem_id=479","statistics":"https://syzoj.com/problem/479/statistics/fastest","testdata":"https://syzoj.com/problem/479/testdata","discussion":"https://syzoj.com/discussion/problem/479"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"一棵有点权的有根树如果满足以下条件，则被轩轩称为对称二叉树：\r\n1.二叉树； \r\n2.将这棵树所有节点的左右子树交换，新树和原树对应位置的结构相同且点权相等。\r\n下图中节点内的数字为权值，节点外的id表示节点编号。\r\n![](http://218.28.19.228:8080/upload/image/20181111/20181111214015_15120.png)\r\n现在给出一棵二叉树，希望你找出它的一棵子树，该子树为对称二叉树，且节点数最多。请输出这棵子树的节点数。\r\n注意：只有树根的树也是对称二叉树。本题中约定，以节点T为子树根的一棵“子树”指的是：节点T 和它的全部后代节点构成的二叉树。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个正整数n，表示给定的树的节点的数目，规定节点编号1~n，其中节点\r\n1是树根。\r\n第二行n个正整数，用一个空格分隔，第i个正整数vi代表节点i的权值。\r\n接下来n行，每行两个正整数li,ri，分别表示节点i的左右孩子的编号。如果不存在左/右孩子，则以−1表示。两个数之间用一个空格隔开。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出文件共一行，包含一个整数，表示给定的树的最大对称二叉子树的节点数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"【样例输入1】\r\n```\r\n2\r\n1 3\r\n2 -1\r\n-1 -1\r\n```\r\n【样例输出1】\r\n```\r\n1\r\n```\r\n【样例1说明】\r\n\r\n![](http://218.28.19.228:8080/upload/image/20181111/20181111215408_88290.jpg)\r\n最大的对称二叉子树为以节点 2 为树根的子树，节点数为 1。\r\n\r\n【样例输入2】\r\n```\r\n10 \r\n2 2 5 5 5 5 4 4 2 3 \r\n9 10 \r\n-1 -1 \r\n-1 -1 \r\n-1 -1 \r\n-1 -1 \r\n-1 2 \r\n3 4 \r\n5 6 \r\n-1 -1 \r\n7 8\r\n```\r\n【样例输出2】\r\n```\r\n3\r\n```\r\n【样例2说明】\r\n\r\n![](http://218.28.19.228:8080/upload/image/20181111/20181111215421_27638.jpg)\r\n最大的对称二叉子树为以节点 7 为树根的子树，节点数为 3。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"共 25 个测试点。\r\nvi≤1000。\r\n测试点 1-3，n≤10，保证 根结点的左子树所有节都没右 孩子，根结点的右 孩子，根结点的右子树的所有节点 都没有左孩子。\r\n测试点 4-8，n≤10。\r\n测试点 9-12，n≤105，保证输入是一棵 “满二叉树 ”。\r\n测试点 13-16，n≤105，保证输入 是一棵 “完全二叉树 ”。\r\n测试点 17-20，n≤105，保证输入的 树点权 均为 1。\r\n测试点 21-25，n≤106。\r\n本题约定：\r\n层次：节点的层次从根开始定义起，根为第一层，根的孩子为第二层。树中任一节点的层次等于其父亲节点的层次加1。\r\n树的深度：树中节点的最大层次称为树的深度。\r\n满二叉树：设二叉树的深度为h，且二叉树有2h−1个节点，这就是满二叉树。\r\n![](http://218.28.19.228:8080/upload/image/20181111/20181111220012_33701.jpg)\r\n    满二叉树（深度为 3）\r\n完全二叉树：设二叉树的深度为h，除第h层外，其它各层的结点数都达到最大个数，第h层所有的结点都连续集中在最左边，这就是完全二叉树。\r\n![](http://218.28.19.228:8080/upload/image/20181111/20181111220051_36424.jpg)\r\n      完全二叉树（深度为 3）                  完全二叉树（深度为 3）"}]}