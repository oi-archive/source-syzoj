{"title":"花神游历各国","time_limit":1000,"memory_limit":512,"tags":["线段树"],"operation":{"submit":"https://syzoj.com/problem/820#submit_code","submissions":"https://syzoj.com/submissions?problem_id=820","statistics":"https://syzoj.com/problem/820/statistics/fastest","testdata":"https://syzoj.com/problem/820/testdata","discussion":"https://syzoj.com/discussion/problem/820"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"**原题来自：[BZOJ 3211](https://www.lydsy.com/JudgeOnline/problem.php?id=3211)**\r\n\r\n花神喜欢步行游历各国，顺便虐爆各地竞赛。花神有一条游览路线，它是线型的，也就是说，所有游历国家呈一条线的形状排列，花神对每个国家都有一个喜欢程度（当然花神并不一定喜欢所有国家）。\r\n\r\n每一次旅行中，花神会选择一条旅游路线，它在那一串国家中是连续的一段，这次旅行带来的开心值是这些国家的喜欢度的总和，当然花神对这些国家的喜欢程序并不是恒定的，有时会突然对某些国家产生反感，使他对这些国家的喜欢度 $\\delta$ 变为 $\\sqrt \\delta$（可能是花神虐爆了那些国家的 OI，从而感到乏味）。\r\n\r\n现在给出花神每次的旅行路线，以及开心度的变化，请求出花神每次旅行的开心值。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行是一个整数 $N$，表示有 $N$ 个国家；\r\n\r\n第二行有 $N$ 个空格隔开的整数，表示每个国家的初始喜欢度 $\\delta_i$；\r\n\r\n第三行是一个整数 $M$，表示有 $M$ 条信息要处理；\r\n\r\n第四行到最后，每行三个整数 $x,l,r$，当 $x=1$ 时询问游历国家 $l$ 到 $r$ 的开心值总和，也就是 $\\sum\\limits_{i=l}^r \\delta_i$ ，当 $x=2$ 时国家 $l$ 到 $r$ 中每个国家的喜欢度 $\\delta_i$ 变为 $\\sqrt {\\delta_i}$ 。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"每次 $x=1$ 时，每行一个整数。表示这次旅行的开心度。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n```plain\r\n4\r\n1 100 5 5\r\n5\r\n1 1 2\r\n2 1 2\r\n1 1 2\r\n2 2 3\r\n1 1 4\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n101\r\n11\r\n11\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于全部数据，$1\\le n\\le 10^5,1\\le m\\le 2\\times 10^5,1\\le l\\le r\\le n,0\\le \\delta_i \\le 10^9$。\r\n\r\n注：建议使用 `sqrt` 函数，且向下取整。"}]}