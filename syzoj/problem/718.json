{"title":"「CSP-S 2019」树的重心","time_limit":3000,"memory_limit":256,"tags":["树链剖分","文件 IO"],"operation":{"submit":"https://syzoj.com/problem/718#submit_code","submissions":"https://syzoj.com/submissions?problem_id=718","statistics":"https://syzoj.com/problem/718/statistics/fastest","testdata":"https://syzoj.com/problem/718/testdata","discussion":"https://syzoj.com/discussion/problem/718"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"小简单正在学习离散数学，今天的内容是图论基础，在课上他做了如下两条笔记：\r\n1. 一个大小为 $n$ 的树由 $n$ 个结点与 $n − 1$ 条无向边构成，且满足任意两个结点间**有且仅有**一条简单路径。在树中删去一个结点及与它关联的边，树将分裂为若干个子树；而在树中删去一条边（保留关联结点，下同），树将分裂为**恰好**两个子树。\r\n2. 对于一个大小为 $n$ 的树与任意一个树中结点 $c$，称 $c$ 是该树的**重心**当且仅当在树中删去 $c$ 及与它关联的边后，分裂出的所有子树的大小均**不超过** $\\lfloor \\frac{n}{2} \\rfloor$（其中 $\\lfloor x \\rfloor$ 是下取整函数）。对于包含至少一个结点的树，它的重心只可能有 $1$ 或 $2$ 个。\r\n\r\n课后老师给出了一个大小为 $n$ 的树 $S$，树中结点从 $1 \\sim n$ 编号。小简单的课后作业是求出 $S$ 单独删去每条边后，分裂出的两个子树的重心编号和之和。即：\r\n\r\n$$\r\n\\sum_{(u,v)\\in E}\\left(\\sum_{x\\in c(S'_u)} x+\\sum_{y\\in c(S'_v)} y\\right)\r\n$$\r\n\r\n上式中，$E$ 表示树 $S$ 的边集，$(u, v)$ 表示一条连接 $u$ 号点和 $v$ 号点的边。$S'_u$ 与 $S'_v$ 分别表示树 $S$ 删去边 $(u, v)$ 后，$u$ 号点与 $v$ 号点所在的被分裂出的子树，$c(S)$ 表示树 $S$ 重心的集合。\r\n\r\n小简单觉得作业并不简单，只好向你求助，请你教教他。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"从文件 `centroid.in` 中读入数据。\r\n\r\n**本题输入包含多组测试数据**。\r\n\r\n第一行一个整数 $T$ 表示数据组数。\r\n\r\n接下来依次给出每组输入数据，对于每组数据：\r\n\r\n第一行一个整数 $n$ 表示树 $S$ 的大小。\r\n\r\n接下来 $n − 1$ 行，每行两个以空格分隔的整数 $u_i, v_i$，表示树中的一条边 $(u_i, v_i)$。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出到文件 `centroid.out` 中。\r\n\r\n共 $T$ 行，每行一个整数，第 $i$ 行的整数表示：第 $i$ 组数据给出的树单独删去每条边后，分裂出的两个子树的重心编号和之和。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n2\r\n5\r\n1 2\r\n2 3\r\n2 4\r\n3 5\r\n7\r\n1 2\r\n1 3\r\n1 4\r\n3 5\r\n3 6\r\n6 7\r\n```\r\n#### 样例输出 1\r\n```plain\r\n32\r\n56\r\n```\r\n#### 样例说明 1\r\n对于第一组数据：\r\n\r\n删去边 $(1, 2)$，$1$ 号点所在子树重心编号为 $\\{1\\}$，$2$ 号点所在子树重心编号为 $\\{2, 3\\}$。\r\n\r\n删去边 $(2, 3)$，$2$ 号点所在子树重心编号为 $\\{2\\}$，$3$ 号点所在子树重心编号为 $\\{3, 5\\}$。\r\n\r\n删去边 $(2, 4)$，$2$ 号点所在子树重心编号为 $\\{2, 3\\}$，$4$ 号点所在子树重心编号为 $\\{4\\}$。\r\n\r\n删去边 $(3, 5)$，$3$ 号点所在子树重心编号为 $\\{2\\}$，$5$ 号点所在子树重心编号为 $\\{5\\}$。\r\n\r\n因此答案为 $1 + 2 + 3 + 2 + 3 + 5 + 2 + 3 + 4 + 2 + 5 = 32$。\r\n\r\n#### 样例 2\r\n见附加文件 `centroid2.in/ans`。\r\n\r\n#### 样例 3\r\n见附加文件 `centroid3.in/ans`。\r\n\r\n该数据满足特殊性质 A，具体信息见数据范围中的描述。\r\n\r\n#### 样例 4\r\n见附加文件 `centroid4.in/ans`。\r\n\r\n该数据满足特殊性质 B，具体信息见数据范围中的描述。"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"| 测试点编号  |   $n=$   | 特殊性质 |\r\n| :---------: | :------: | :------: |\r\n|  $1\\sim 2$  |   $7$    |    无    |\r\n|  $3\\sim 5$  |  $199$   |    无    |\r\n|  $6\\sim 8$  |  $1999$  |    无    |\r\n| $9\\sim 11$  | $49991$  |    A     |\r\n| $12\\sim 15$ | $262143$ |    B     |\r\n|    $16$     | $99995$  |    无    |\r\n| $17\\sim 18$ | $199995$ |    无    |\r\n| $19\\sim 20$ | $299995$ |    无    |\r\n\r\n表中特殊性质一栏，两个变量的含义为存在一个 $1 \\sim n$ 的排列 $p_i$（$1 \\le i \\le n$），使得：\r\n- A：树的形态是一条链。即 $\\forall 1 \\le i < n$，存在一条边 $(p_i, p_{i+1})$。\r\n- B：树的形态是一个完美二叉树。即 $\\forall 1 \\le i \\le \\frac{n-1}{2}$，存在两条边 $(p_i, p_{2i})$ 与 $(p_i, p_{2i+1})$。\r\n\r\n对于所有测试点：$1 \\le T \\le 5 , 1 \\le u_i, v_i \\le n$。保证给出的图是一个树。"}]}