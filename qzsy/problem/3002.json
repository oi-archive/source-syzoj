{"title":"「NOIP2003」加分二叉树","time_limit":1000,"memory_limit":128,"tags":["提高","NOIP"],"operation":{"submit":"https://oj.iqzsy.xyz/problem/3002#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=3002","statistics":"https://oj.iqzsy.xyz/problem/3002/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/3002/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/3002"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"设一个 $n$ 个节点的二叉树 $tree$ 的中序遍历为 $(1,2,3,\\cdots,n)$ ，其中数字 $1,2,3\\cdots,n$ 为节点编号。\r\n\n\r\n\n每个节点都有一个分数（均为正整数），记第 $i$ 个节点的分数为 $d_i$ ， $tree$ 及它的每个子树都有一个加分，任一棵子树 $subtree$ （也包含 $tree$ 本身）的加分计算方法如下： \r\n\n\r\n\n$subtree$ 的左子树的加分 $\\times$ $subtree$ 的右子树的加分 $+$ $subtree$ 的根的分数 \r\n\n\r\n\n若某个子树为空，规定其加分为 $1$ ，叶子的加分就是叶节点本身的分数。不考虑它的空子树。 \r\n\n\r\n\n试求一棵符合中序遍历为 $(1,2,3,\\cdots,n)$ 且加分最高的二叉树 $tree$ 。要求输出：\r\n\n\r\n\n（1） $tree$ 的最高加分 \r\n\n\r\n\n（2） $tree$ 的前序遍历 "},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第 $1$ 行：一个整数 $n$ ，为节点个数；\r\n\n\r\n\n第 $2$ 行：$n$ 个用空格隔开的整数，为每个节点的分数。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"第 $1$ 行：一个整数，为最高加分（结果不会超过 $4,000,000,000$ ）；\r\n\n\r\n\n第 $2$ 行： $n$ 个用空格隔开的整数，为该树的前序遍历。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"### binary.in\r\n<pre>\r\n5 \r\n5 7 1 2 10\r\n</pre>\r\n\r\n### binary.out\r\n<pre>\r\n145\r\n3 1 2 4 5\r\n</pre>"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于$100\\%$ 的数据，$n<30$，每个节点的分数 $<100$。"}]}