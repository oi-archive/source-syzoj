{"title":"[数据结构]树的统计","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/1169#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=1169","statistics":"https://oj.iqzsy.xyz/problem/1169/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/1169/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/1169"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"一棵树上有n个节点，编号分别为1到n，每个节点都有一个权值w。我们将以下面的形式来要求你对这棵树完成一些操作：\r\n\r\nI. CHANGE  u  t : 把结点u的权值改为t                      \r\nII. QMAX  u v: 询问从点u到点v的路径上的节点的最大权值  \r\nIII. QSUM u v: 询问从点u到点v的路径上的节点的权值和  \r\n注意：从点u到点v的路径上的节点包括u和v本身.\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入的第一行为一个整数n，表示节点的个数。\r\n接下来n – 1行，每行2个整数a和b，表示节点a和节点b之间有 一条边相连。\r\n接下来n行，每行一个整数，第i行的整数wi表示节点i的权值。\r\n接下来1行，为一个整数q，表示操作 的总数。 \r\n接下来q行，每行一个操作，以“CHANGE u t”或者“QMAX u v”或者“QSUM u v”的形式给出。 "},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个“QMAX”或者“QSUM”的操作，每行输出一个整数表示要求输出的结果。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"Sample Input\r\n```\r\n4 \r\n1 2 \r\n2 3 \r\n4 1 \r\n4 2 1 3 \r\n12 \r\nQMAX 3 4 \r\nQMAX 3 3 \r\nQMAX 3 2 \r\nQMAX 2 3 \r\nQSUM 3 4 \r\nQSUM 2 1 \r\nCHANGE 1 5 \r\nQMAX 3 4 \r\nCHANGE 3 6 \r\nQMAX 3 4 \r\nQMAX 2 4 \r\nQSUM 3 4\r\n``` \r\nSample Output\r\n```\r\n4 \r\n1 \r\n2 \r\n2 \r\n10 \r\n6 \r\n5 \r\n6 \r\n5 \r\n16\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于100％的数据，保证1<=n<=30000，0<=q<=200000；\r\n\r\n中途操作中保证每个节点的权值w在-30000到30000之间。\r\n"}]}