{"title":"[数据结构]维护序列(bzoj1798)","time_limit":1000,"memory_limit":256,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/1160#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=1160","statistics":"https://oj.iqzsy.xyz/problem/1160/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/1160/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/1160"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"老师交给小可可一个维护数列的任务，现在小可可希望你来帮他完成。 有长为N的数列，不妨设为a1,a2,…,aN 。有如下三种操作形式：\r\n(1)把数列中的一段数全部乘一个值;\r\n(2)把数列中的一段数全部加一个值; \r\n(3)询问数列中的一段数的和，由于答案可能很大，你只需输出这个数模P的值。\r\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行两个整数N和P(1≤P≤1000000000）。第二行含有N个非负整数,从左到右依次为a1,a2,…,aN, (0≤ai≤1000000000,1≤i≤N)。第三行有一个整数M，表示操作总数。从第四行开始每行描述一个操作，输入的操作有以下三种形式： 操作1：“1 t g c”(不含双引号)。表示把所有满足t≤i≤g的ai改为ai×c (1≤t≤g≤N,0≤c≤1000000000)。 操作2：“2 t g c”(不含双引号)。表示把所有满足t≤i≤g的ai改为ai+c (1≤t≤g≤N,0≤c≤1000000000)。 操作3：“3 t g”(不含双引号)。询问所有满足t≤i≤g的ai的和模P的值 (1≤t≤g≤N)。 同一行相邻两数之间用一个空格隔开，每行开头和末尾没有多余空格。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对每个操作3，按照它在输入中出现的顺序，依次输出一行一个整数表示询问结果。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"Sample Input\r\n```\r\n7 43\r\n1 2 3 4 5 6 7\r\n5\r\n1 2 5 5\r\n3 2 4\r\n2 3 7 9\r\n3 1 3\r\n3 4 7\r\n```\r\nSample Output\r\n```\r\n2\r\n35\r\n8\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"【样例说明】\r\n初始时数列为(1,2,3,4,5,6,7)。\r\n\r\n经过第1次操作后，数列为(1,10,15,20,25,6,7)。\r\n\r\n对第2次操作，和为10+15+20=45，模43的结果是2。\r\n\r\n经过第3次操作后，数列为(1,10,24,29,34,15,16}\r\n\r\n对第4次操作，和为1+10+24=35，模43的结果是35。\r\n\r\n对第5次操作，和为29+34+15+16=94,模43的结果是8。\r\n\r\n\r\n测试数据规模如下表所示\r\n\r\n\r\n数据编号 \r\n             1\t  2\t     3\t     4\t     5\t      6\t      7\t      8\t       9\t    10\r\n\r\n      N=\t10\t1000\t1000\t10000\t60000\t70000\t80000\t90000\t100000\t100000\r\n\r\n      M=\t10\t1000\t1000\t10000\t60000\t70000\t80000\t90000\t100000\t100000"}]}