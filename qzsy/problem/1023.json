{"title":"「泉州一中基地赛20180519」第三题","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/1023#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=1023","statistics":"https://oj.iqzsy.xyz/problem/1023/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/1023/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/1023"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"【题目描述】\r\n\n\r\n\n小 A 有一个长度为 $n$ 的序列 $a$，满足 $a$ 中的所有元素都是 $1$ 或 $2$。\r\n\n\r\n\n你想要篡改这个序列。你可以任意选择原序列的一段区间 $[l,r]$，并将 $a_l, a_{l+1},\\cdots, a_r$ 翻转。为了不被发现，你只能执行该操作至多一次。\r\n\n\r\n\n你希望最大化操作之后序列最长不下降子序列的长度，请求出这个值。\r\n\n\r\n\n序列 $a$ 的一个不下降子序列是一个下标序列 $p_1, p_2,\\cdots, p_k$，满足 $p_1 < p_2 <\\cdots < p_k$ 且 $a_{p_1} \\le a_{p_2} \\le \\cdots \\le a_{p_k}$ 。定义它的长度为 $k$。\r\n\n\r\n\n"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"【输入格式】\r\n\n\r\n\n从文件 $sanrd.in$ 中读入数据。\r\n\n\r\n\n第一行一个整数 $n$，表示序列的长度。\r\n\n\r\n\n第二行 $n$ 个用空格隔开的正整数，描述了序列 $a$。\r\n\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"【输出格式】\r\n\n\r\n\n输出到文件 $sanrd.out$ 中。\r\n\n\r\n\n输出一行一个整数，表示操作之后序列最长不下降子序列长度的最大值。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"【样例 1 输入】\r\n```\r\n4\r\n1 2 1 2\r\n```\r\n\r\n【样例 1 输出】\r\n```\r\n4\r\n```\r\n\r\n【样例 2 输入】\r\n```\r\n10\r\n1 1 2 2 2 1 1 2 2 1\r\n```\r\n\r\n【样例 2 输出】\r\n```\r\n9\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"【样例 2 解释】\r\n\n\r\n\n你可以选择区间 $[3, 7]$ 并将其翻转，得到的序列为 $[1, 1, 1, 1, 2, 2, 2, 2, 2, 1]$，它的最长不下降子序列的长度为 $9$。不难发现对于这组数据不存在更优的解。\r\n\n\r\n\n【子任务】\r\n\n\r\n\n对于 $60\\%$ 的数据，$n \\le 200$；\r\n\n\r\n\n对于 $90\\%$ 的数据，$n \\le 2000$；\r\n\n\r\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2\\times 10^5, 1 \\le a_i \\le 2$。"}]}