{"title":"[宽度搜索]营救","time_limit":1000,"memory_limit":256,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/145#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=145","statistics":"https://oj.iqzsy.xyz/problem/145/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/145/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/145"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"1944 年，特种兵麦克接到国防部的命令，要求立即赶赴太平洋上的一个孤岛，营救被敌军俘虏的大兵瑞恩。瑞恩被关押在一个迷宫里，迷宫地形复杂，但幸好麦克得到了迷宫的地形图。迷宫的外形是一个长方形，其南北方向被划分为 n 行，东西方向被划分为 m 列， 于是整个迷宫被划分为 n×m 个单元。每一个单元的位置可用一个有序数对 (单元的行号, 单元的列号) 来表示。南北或东西方向相邻的 2 个单元之间可能互通，也可能有一扇锁着的门，或者是一堵不可逾越的墙。迷宫中有一些单元存放着钥匙，并且所有的门被分成 p 类， 打开同一类的门的钥匙相同，不同类门的钥匙不同。\r\n\r\n大兵瑞恩被关押在迷宫的东南角，即 (n,m) 单元里，并已经昏迷。迷宫只有一个入口， 在西北角。也就是说，麦克可以直接进入 (1,1) 单元。另外，麦克从一个单元移动到另一个相邻单元的时间为 1，拿取所在单元的钥匙的时间以及用钥匙开门的时间可忽略不计。\r\n\r\n试设计一个算法，帮助麦克以最快的方式到达瑞恩所在单元，营救大兵瑞恩。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有三个整数,分别表示 n,m,pn,m,p 的值。\r\n\r\n第二行是一个整数kk，表示迷宫中门和墙的总数。\r\n\r\n第 i+2 行 (1≤i≤k)，有 5 个整数，依次为 xi1,yi1,xi2,yi2,gi:当 gi≥1 时，表示 (xi1,yi1)单元与 (xi2,yi2) 单元之间有一扇第 gi 类的门，当 gi=0 时， 表示 (xi1,yi1) 单元与 (xi2,yi2) 单元之间有一堵不可逾越的墙。\r\n\r\n第 k+3 行是一个整数 s，表示迷宫中存放的钥匙总数。\r\n\r\n第 k+3+j行 (1≤j≤s) ，有 3 个整数，依次为 xi1,yi1,qi​​​​ ，表示第 j 把钥匙存放在 (xi1,yi1) 单元里，并且第 j 把钥匙是用来开启第 qi 类门。\r\n\r\n输入数据中同一行各相邻整数之间用一个空格分隔。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出麦克营救到大兵瑞恩的最短时间。如果问题无解，则输出 −1"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"【输入样例】\r\n```\r\n4 4 9\r\n9\r\n1 2 1 3 2\r\n1 2 2 2 0\r\n2 1 2 2 0\r\n2 1 3 1 0 \r\n2 3 3 3 0\r\n2 4 3 4 1\r\n3 2 3 3 0\r\n3 3 4 3 0\r\n4 3 4 4 0\r\n2\r\n2 1 2 \r\n4 2 1\r\n```\r\n【输出样例】\r\n```\r\n14\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"|xi1−xi2|+|yi1−yi2|=1,0≤gi≤p\r\n1≤qi≤p\r\nn,m,p≤10,k<150"}]}