{"title":"「2018-10-17模拟赛」双色多边形 (poly)","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/1035#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=1035","statistics":"https://oj.iqzsy.xyz/problem/1035/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/1035/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/1035"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"果果有一张 $n$ 个点 $m$ 条边的无向图，每条边均为黑白二色之一，且有一个黑或白的目标颜色，如果果果把边上的颜色都变为了目标颜色，那么他就切掉了这道题。\r\n\r\n果果有一种切题技巧，她每次可以选择一个多边形（不经过重复边或起点以外结点的环）回到出发点，将所有经过边的颜色反转，即黑色变为白色，白色变为黑色。他可以使用这样的技巧很多次。\r\n\r\n你需要帮助果果给出一个切题方案，使得每条边最终都变为目标颜色。\r\n\r\n当然果果的切题技巧可能不够优秀，在无论如何都切不掉这道题的情况下，你需要输出 `-1`。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入的第一行包含两个空格分隔的正整数 $n$ 和 $m$（$1 \\leq n \\leq 100\\,000$，$1 \\leq m \\leq 1\\,000\\,000$），表示图的点数和边数。\r\n\r\n接下来 $m$ 行，每行包含四个空格分隔的正整数 $a, b, s, t$（$1 \\leq a \\lt b \\leq n$，$s, t \\in \\{0, 1\\}$），表示一条联结结点 $a$ 与 $b$ 的边，初始颜色和目标颜色分别为 $s$ 与 $t$。\r\n\r\n果果相信对于一道他可以切掉的题，只需要总边数不超过 $5m$ 的多边形即可。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"如果果果切不掉这道题，输出 `-1`；  \r\n否则按下列格式输出任意一种方案：\r\n* 第一行包含一个整数 $k$，表示切题技巧使用的总次数；\r\n* 接下来 $k$ 行，每行描述一个多边形：\r\n  * 首先是一个正整数 $k_i$ 表示多边形的边数，后接一个空格；\r\n  * 接下来 $k_i + 1$ 个空格分隔的整数，依次表示多边形顶点的编号。\r\n\r\n**你需要保证你的多边形总边数不超过 $5m$。**"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入 1\r\n```plain\r\n6 8\r\n1 2 0 1\r\n2 3 1 0\r\n1 3 0 1\r\n2 4 0 0\r\n3 5 1 1\r\n4 5 0 1\r\n5 6 0 1\r\n4 6 0 1\r\n```\r\n\r\n#### 样例输出 1\r\n```plain\r\n2\r\n3 1 3 2 1\r\n3 4 6 5 4\r\n```\r\n\r\n#### 样例输入 2\r\n```plain\r\n6 8\r\n1 2 0 1\r\n2 3 1 0\r\n1 3 0 1\r\n2 4 0 0\r\n3 5 1 1\r\n4 5 0 1\r\n5 6 0 1\r\n4 6 0 0\r\n```\r\n\r\n#### 样例输出 2\r\n```plain\r\n-1\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"** *Subtask* \\#1 (6 *points*): $n \\leq 20, m \\leq 30$**    \r\n** *Subtask* \\#2 (8 *points*): $n \\leq 500, m \\leq 5 \\times 10^3$**    \r\n** *Subtask* \\#3 (12 *points*): $n \\leq 2000, m \\leq 5 \\times 10^3$**    \r\n** *Subtask* \\#4 (14 *points*): $n \\leq 5000, m \\leq 10^4$**    \r\n** *Subtask* \\#5 (23 *points*): $n \\leq 10^4, m \\leq 5 \\times 10^5$**    \r\n** *Subtask* \\#6 (37 *points*): $n \\leq 10^5, m \\leq 10^6$**    \r\n** 对于所有数据，保证这是一张无重边的图。**      \r\n** <font color = red> <u> 友情提示：请注意输入输出效率。</u> </font> **"}]}