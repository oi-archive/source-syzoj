{"title":"[动态规划]加分二叉树(NOIP2003)","time_limit":1000,"memory_limit":256,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/1185#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=1185","statistics":"https://oj.iqzsy.xyz/problem/1185/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/1185/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/1185"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"设一个n个节点的二叉树tree的中序遍历为(1,2,3,.....,n)，其中数字为节点编号。每个节点都有一个分数（均为正整数），记第i个节点的分数为di，tree及它的每个子树都有一个加分，任一棵子树subtree（也包含tree本身）的加分计算方法如下：\r\n\r\n记subtree的左子树加分为l ，右子树加分为 r，subtree 的根的分数为a，则subtree 的加分为：i*r+a\r\n\r\n\r\n若某个子树为空，规定其加分为1 ，叶子的加分就是叶节点本身的分数。不考虑它的空子树。\r\n\r\n试求一棵符合中序遍历为(1,2,3,.....,n)且加分最高的二叉树tree 。\r\n\r\n要求输出：\r\n\r\n1、tree的最高加分；\r\n\r\n2、tree 的前序遍历。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个整数n表示节点个数；\r\n\r\n第二行n个空格隔开的整数，表示各节点的分数。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"第一行一个整数，为最高加分b；\r\n\r\n第二行n个用空格隔开的整数，为该树的前序遍历。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"样例输入\r\n```\r\n5\r\n5 7 1 2 10\r\n```\r\n样例输出\r\n```\r\n145\r\n3 1 2 4 5\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于100%的数据n<30，b<100，结果不超过4*10^9 。"}]}