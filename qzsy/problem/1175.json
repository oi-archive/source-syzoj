{"title":"[动态规划]分离与合体","time_limit":1000,"memory_limit":256,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/1175#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=1175","statistics":"https://oj.iqzsy.xyz/problem/1175/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/1175/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/1175"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"经过在机房里数日的切磋，LYD 从杜神牛那里学会了分离与合体，出关前，杜神牛给了他一个测试……\r\n\r\n杜神牛造了n个区域，他们紧邻着排成一行，编号1..n 。在每个区域里都放着一把 OI 界的金钥匙，每一把都有一定的价值，LYD 当然想得到他们了。然而杜神牛规定 LYD 不能一下子把他们全部拿走，而是每次只可以拿一把。为了尽快得到所有金钥匙，LYD 自然就用上了刚学的分离与合体特技。\r\n\r\n一开始 LYD 可以选择1..n-1中的任何一个区域进入，我们不妨把这个区域记为k 。进入后 LYD 会在k区域发生分离，从而分离成两个小 LYD。分离完成的同时会有一面墙在k区域和k+1区域间升起，从而把1..k和k+1..n阻断成两个独立的区间，并在各自区间内任选除区间末尾之外（即从1..k-1和k+1..n-1中选取）的任意一个区域再次发生分离，这样就有了四个小小 LYD……重复以上所叙述的分离，直到每个小 LYD 发现自己所在的区间只剩下了一个区域，那么他们就可以抱起自己梦寐以求的 OI 金钥匙。\r\n\r\n但是 LYD 不能就分成这么多个个体存在于世界上，这些小 LYD 还会再合体，合体的小 LYD 所在区间中间的墙会消失。合体会获得(合并后所在区间左右端区域里金钥匙价值之和)*(之前分离的时候所在区域的金钥匙价值)。\r\n\r\n例如，LYD 曾在1..3区间中的2号区域分离成为1..2和3..3两个区间，合并时获得的价值就是=(1号金钥匙价值+3 号金钥匙价值)*2号金钥匙价值。\r\n\r\nLYD 请你编程求出最终可以获得的最大总价值，并按照分离阶段从前到后，区域从左到右的顺序，输出发生分离区域编号。若有多种方案，选择分离区域尽量靠左的方案（也可以理解为输出字典序最小的）。\r\n\r\n例如先打印一分为二的区域，然后从左到右打印二分为四的分离区域，然后是四分为八的……"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行一个正整数n, 第二行n个用空格分开的正整数ai，表示1..n区域里每把金钥匙的价值。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"第一行一个数，表示获得的最大价值\r\n\r\n第二行按照分离阶段从前到后，区域从左到右的顺序，输出发生分离区域编号。若有多种方案，选择分离区域尽量靠左的方案（也可以理解为输出字典序最小的）。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"样例输入\r\n```\r\n7\r\n1 2 3 4 5 6 7\r\n```\r\n样例输出\r\n```\r\n238\r\n1 2 3 4 5 6\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于20%的数据，n<=10；\r\n\r\n对于50%的数据，n<=50；\r\n\r\n对于100%的数据，n<=300，保证运算过程和结果不超过32位正整数范围。"}]}