{"title":"[数据结构]异象石","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/1163#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=1163","statistics":"https://oj.iqzsy.xyz/problem/1163/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/1163/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/1163"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"Adera是Microsoft应用商店中的一款解谜游戏。\r\n异象石是进入Adera中异时空的引导物，在Adera的异时空中有一张地图。这张地图上有N个点，有N-1条双向边把它们连通起来。起初地图上没有任何异象石，在接下来的M个时刻中，每个时刻会发生以下三种类型的事件之一：\r\n1.地图的某个点上出现了异象石（已经出现的不会再次出现）；\r\n2.地图某个点上的异象石被摧毁（不会摧毁没有异象石的点）；\r\n3.向玩家询问使所有异象石所在的点连通的边集的总长度最小是多少。\r\n请你作为玩家回答这些问题。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有一个整数N，表示点的个数。\r\n接下来N-1行每行三个整数x,y,z，表示点x和y之间有一条长度为z的双向边。\r\n第N+1行有一个正整数M。\r\n接下来M行每行是一个事件，事件是以下三种格式之一：\r\nx 表示点x上出现了异象石\r\nx表示点x上的异象石被摧毁\r\n?表示询问使当前所有异象石所在的点连通所需的边集的总长度最小是多少。\r\n"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个 ?事件，输出一个整数表示答案。\r\n"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"样例输入 \r\n```\r\n6 \r\n1 2 1 \r\n1 3 5 \r\n4 1 7 \r\n4 5 3 \r\n6 4 2 \r\n10 \r\n+ 3 \r\n+ 1 \r\n? \r\n+ 6 \r\n? \r\n+ 5 \r\n? \r\n- 6\r\n - 3 \r\n? \r\n```\r\n样例输出\r\n```\r\n5 \r\n14\r\n17 \r\n10 \r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于100%的数据，1 ≤ n, m ≤ 10^5, 1 ≤ x, y ≤ n, x ≠ y, 1 ≤ z ≤ 10^9。\r\n"}]}