{"title":"[数据结构] 染色[bzoj2243]","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/1172#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=1172","statistics":"https://oj.iqzsy.xyz/problem/1172/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/1172/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/1172"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"给定一棵有n个节点的无根树和m个操作，操作有2类：\r\n1、将节点a到节点b路径上所有点都染成颜色c；\r\n2、询问节点a到节点b路径上的颜色段数量（连续相同颜色被认为是同一段），\r\n如“112221”由3段组成：“11”、“222”和“1”。\r\n请你写一个程序依次完成这m个操作。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行包含2个整数n和m，分别表示节点数和操作数；\r\n第二行包含n个正整数表示n个节点的初始颜色\r\n下面 行每行包含两个整数x和y，表示x和y之间有一条无向边。\r\n下面 行每行描述一个操作：\r\n“C a b c”表示这是一个染色操作，把节点a到节点b路径上所有点（包括a和b）都染成颜色c；\r\n“Q a b”表示这是一个询问操作，询问节点a到节点b（包括a和b）路径上的颜色段数量。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个询问操作，输出一行答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"Sample Input\r\n```\r\n6 5\r\n2 2 1 2 1 1\r\n1 2\r\n1 3\r\n2 4\r\n2 5\r\n2 6\r\nQ 3 5\r\nC 2 1 1\r\nQ 3 5\r\nC 5 1 2\r\nQ 3 5\r\n```\r\nSample Output\r\n```\r\n3\r\n1\r\n2\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"数N<=10^5，操作数M<=10^5，所有的颜色C为整数且在[0, 10^9]之间。"}]}