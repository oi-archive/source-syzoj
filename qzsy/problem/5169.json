{"title":"「长乐国庆集训2018ROUND4」2. 选球游戏","time_limit":1000,"memory_limit":512,"tags":[],"operation":{"submit":"https://oj.iqzsy.xyz/problem/5169#submit_code","submissions":"https://oj.iqzsy.xyz/submissions?problem_id=5169","statistics":"https://oj.iqzsy.xyz/problem/5169/statistics/fastest","testdata":"https://oj.iqzsy.xyz/problem/5169/testdata","discussion":"https://oj.iqzsy.xyz/discussion/problem/5169"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"华华和秀秀在玩游戏。在他们面前有球排成一排，从左到右按 $1$ 到 $n$ 编号。每个球有一个可正可负的权值。\r\n\r\n每一轮，秀秀会选定一个区间 $[a,b]$，将编号在这个区间内的所有球的权值加上一个值 $c$ 或者将编号在这个区间内的所有球的权值都设为其相反数。\r\n\r\n华华则需从这球中选出 $k$ 个球来，他的得分为这 $k$ 个球的权值的乘积。\r\n\r\n华华每次都能快快地找出得分最优的选球方案来。秀秀想了想，决定提升游戏难度。她每次会选定一个区间 $[a,b]$，然后询问华华在这个区间内选出 $k(1 \\le k \\le 10)$ 个球的所有方案的得分之和。\r\n\r\n这下可把华华难倒了，于是华华找到了聪明的你。你能帮帮他嘛？\r\n\r\n由于所有方案的得分之和可能很大，你只需要输出得分之和对 $1000000007(10 ^ 9 + 7)$ 取模的结果（负数请加上 $10^9+7$ 变成非负数）即可。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"输入第一行包含两个正整数 $n,m$，分别表示球的个数和秀秀的操作条数。\r\n\r\n接下来一行包含 $n$ 个空格隔开的整数，表示每个球初始的权值。\r\n\r\n接下来 $m$ 行，每行表示秀秀的一个操作。\r\n\r\n若该行形如 `1 a b c`，则表示将编号属于 $[a,b]$ 的所有球的权值都加上了 $c$；\r\n\r\n若该行形如 `2 a b`，则表示将编号属于 $[a,b]$ 的所有球的权值都置为了其相反数；\r\n\r\n若该行形如 `3 a b k`，则表示需要回答从 $[a,b]$ 中选出 $k$ 个球的所有取球方案的得分之和。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"对于每个询问操作，输出一行，表示答案。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"**【样例输入】**\r\n\r\n```\r\n10 9\r\n3 6 7 4 6 1 6 7 2 6 \r\n3 5 7 3\r\n1 1 7 -9\r\n1 2 3 5\r\n3 2 6 1\r\n2 5 8\r\n3 5 7 3\r\n2 2 3\r\n3 1 10 2\r\n3 1 2 2\r\n```\r\n\r\n\r\n\r\n**【样例输出】**\r\n\r\n```\r\n36\r\n999999996\r\n72\r\n999999885\r\n12\r\n```\r\n\r\n\r\n\r\n**【样例解释】**\r\n\r\n> 第一个询问：\r\n>\r\n> $6 \\times 1 \\times 6=36$\r\n>\r\n> 第二个询问：\r\n>\r\n> 询问前各个球的权值为：$-6 2 3 -5 -3 -8 -3 7 2 6$\r\n>\r\n> $2+3+(-5)+(-3)+(-8)=-11$\r\n>\r\n> $-11+(10^9+7)=999999996$\r\n>\r\n> 第三个询问：\r\n>\r\n> 询问前各个球的权值为：$-6 2 3 -5 3 8 3 7 2 6$\r\n>\r\n> $3 \\times 8 \\times 3=72$"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $100\\%$ 的数据，$1 \\le n,m  \\le  50000$，所有输入数据的绝对值均不超过 $10^9$，且$k \\le b-a+1$。\r\n\r\n每个测试点的规模及特点如下表：\r\n\r\n| 测试点编号 | n             | m                  | k     | 其他约定           |\r\n| ---------- | ------------- | ------------------ | ----- | ------------------ |\r\n| 1          | $n \\le 100$   | $m \\le 50000$      | $k=1$ | 无                 |\r\n| 2          |               |                    |       |                    |\r\n| 3          | $k=2$         |                    |       |                    |\r\n| 4          |               |                    |       |                    |\r\n| 5          | $k \\le 10$    |                    |       |                    |\r\n| 6          | $n \\le 50000$ | $m \\le 100$        | $k=1$ |                    |\r\n| 7          |               |                    |       |                    |\r\n| 8          | k=2           |                    |       |                    |\r\n| 9          |               |                    |       |                    |\r\n| 10         | $k \\le 10$    |                    |       |                    |\r\n| 11         | $n \\le 50000$ | $m \\le 50000$      | $k=1$ | 没有取相反数的操作 |\r\n| 12         |               |                    |       |                    |\r\n| 13         | 无            |                    |       |                    |\r\n| 14         |               |                    |       |                    |\r\n| 15         | $k=2$         | 没有取相反数的操作 |       |                    |\r\n| 16         |               |                    |       |                    |\r\n| 17         | 无            |                    |       |                    |\r\n| 18         |               |                    |       |                    |\r\n| 19         | $k \\le 10$    | 没有取相反数的操作 |       |                    |\r\n| 20         | 无            |                    |       |                    |\r\n"}]}