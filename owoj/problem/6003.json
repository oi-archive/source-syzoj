{"title":"「GDKOI 2016 R1」不稳定的传送门","time_limit":1000,"memory_limit":256,"tags":["GDKOI","2016","数学","概率期望"],"operation":{"submit":"https://oj.akioi.ml:8200/problem/6003#submit_code","submissions":"https://oj.akioi.ml:8200/submissions?problem_id=6003","statistics":"https://oj.akioi.ml:8200/problem/6003/statistics/fastest","testdata":"https://oj.akioi.ml:8200/problem/6003/testdata","discussion":"https://oj.akioi.ml:8200/discussion/problem/6003"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"C 国里一共有 $n$ 个城镇，编号为 $1$ 到 $n$。其中第 $i$ 个城镇与第 $i+1$ 个城镇连接着一条收费为 $c_i$ 的从 $i$ 到 $i+1$ 的单向道路 $(1\\le i<n)$。现在，杰杰作为一个旅行者，他的任务就是从第 $1$ 个城镇出发，到达编号为 $n$ 的城镇。他觉得这样会很无聊，海克斯科技公司也是这么认为的。所以该公司在若干个城镇里设置了共 $m$ 个单向传送门。每个传送门有 $4$ 个参数 $s,t,p,w$。$s$ 表示传送门的出发城镇，$t$ 表示传送门的传送目标城镇，保证 $t$ 大于 $s$，$w$ 表示使用该传送门的花费，$p$ 为传送成功的概率，若传送失败会自动返回出发的城市而且该传送门会永久损坏；而且无论传送成功与否，只要使用了该传送门就得花费 $w$。现在，杰杰正在规划他的旅行方案。请你帮他规划一条最优策略，使得旅途期望花费最小。"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行有两个整数 $n$ 和 $m$。\r\n\r\n第二行有 $n−1$ 个用空格隔开的整数，第 $i$ 个数为 $c_i$，意义如上述所示。\r\n\r\n接下来有 $m$ 行，每行有 $4$ 个数 $s,t,p,w$，表示一个传送门的属性，意义如上述所示。其中 $s,t,w$ 为整数。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"一个数，表示期望最小花费，小数点后四舍五入保留两位小数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n\r\n```plain\r\n4 2\r\n30 30 30\r\n1 4 0.5 30\r\n2 3 0.9 10\r\n```\r\n\r\n#### 样例输出\r\n\r\n```plain\r\n66.50\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $30\\%$ 的数据，每个城镇出发的传送门不超过 $5$，且 $n\\le1000$。\r\n\r\n对于 $100\\%$ 的数据，$1\\le n\\le10^5,1\\le m\\le10^5,1\\le w\\le100,0\\le p\\le1,1\\le c_i\\le100$。"}]}