{"title":"「GDKOI 2016 R2」染色大战","time_limit":1000,"memory_limit":256,"tags":["GDKOI","2016","搜索","DP","状态压缩"],"operation":{"submit":"https://oj.akioi.ml:8200/problem/6006#submit_code","submissions":"https://oj.akioi.ml:8200/submissions?problem_id=6006","statistics":"https://oj.akioi.ml:8200/problem/6006/statistics/fastest","testdata":"https://oj.akioi.ml:8200/problem/6006/testdata","discussion":"https://oj.akioi.ml:8200/discussion/problem/6006"},"statement":[{"title":"题目描述","type":"description","format":"markdown","require":["katex"],"content":"染色大战是在一个 $n\\times m$ 的棋盘上进行的游戏，棋盘的每个节点要么是白色，要么是黑色。\r\n\r\n节点的编号方式为：\r\n\r\n$$\r\n\\begin{array}{cccccc}\r\n0&1&2&3&\\ldots&m-1\\\\\r\nm&m+1&m+2&m+3&\\ldots&2m-1\\\\\r\n\\vdots&\\vdots&\\vdots&\\vdots&\\ddots&\\vdots\\\\\r\n(n-1)m&(n-1)m+1&(n-1)m+2&(n-1)m+3&\\ldots&(n-1)m+m-1\r\n\\end{array}\r\n$$\r\n\r\n两个玩家 A 和 B 轮流操作，并且 A 先进行操作。\r\n\r\n每次操作，玩家必须将一个白色的节点变成黑色。\r\n\r\n如果在操作完之后产生了至少一个新的黑色正方形，那么会获得相应的分数，并且奖励多染一次色。\r\n\r\n一个黑色正方形指的是，一个由编号为 $x,x+1,x+m,x+m+1$ 这四个全由黑色节点构成的正方形：\r\n\r\n$$\r\n\\begin{array}{cccc}\r\n\\ldots&\\ldots&\\ldots&\\ldots\\\\\r\n\\ldots&x&x+1&\\ldots\\\\\r\n\\ldots&x+m&x+m+1&\\ldots\\\\\r\n\\ldots&\\ldots&\\ldots&\\ldots\r\n\\end{array}\r\n$$\r\n\r\n注意的是，如果一直产生新的黑色正方形，该玩家可以一直进行染色。\r\n\r\n当所有节点都染成黑色，游戏结束。\r\n\r\n假设 A 和 B 都足够聪明，两人都想让自己的得分尽量多，问在最优策略下，A 得到的分数减去 B 得到的分数为多少。\r\n\r\n下面是一个 $3\\times3$ 的棋盘的例子，也是样例：\r\n\r\n（图略）"},{"title":"输入格式","type":"input_format","format":"markdown","require":["katex"],"content":"第一行 $n$ 和 $m$，表示棋盘大小。\r\n\r\n接下来 $n$ 行 $m$ 列，表示棋盘各个位置的颜色。\r\n\r\n第 $i+1$ 行第 $j$ 列的数字 $a_{i,j}$ 若为 $1$，表示该节点的颜色为黑色；若为 $0$，表示颜色为白色。\r\n\r\n最后是 $n-1$ 行 $m−1$ 列，表示各个正方形的分数。\r\n\r\n第 $i+n+1$ 行第 $j$ 列的数字 $w_{i,j}$ 表示第 $i$ 行第 $j$ 列的正方形（以第 $i$ 行 $j$ 列的节点作为左上角）的分数。"},{"title":"输出格式","type":"output_format","format":"markdown","require":["katex"],"content":"输出一个数字，表示在最优策略下 A 得到的分数减去 B 得到的分数。"},{"title":"样例","type":"example","format":"markdown","require":["katex"],"content":"#### 样例输入\r\n\r\n```plain\r\n3 3\r\n0 0 0\r\n0 0 0\r\n0 0 0\r\n3 2\r\n5 1\r\n```\r\n\r\n#### 样例输出\r\n\r\n```plain\r\n-1\r\n```"},{"title":"数据范围与提示","type":"limit_and_hint","format":"markdown","require":["katex"],"content":"对于 $30\\%$ 的数据，$n=m=3$。\r\n\r\n对于 $100\\%$ 的数据，$3\\le n,m\\le6,n\\times m\\le20,0\\le a_{i,j}\\le1,1\\le w_{i,j}\\le100$。"}]}